"use strict";(self.webpackChunk_reneos_slider_editor_engine=self.webpackChunk_reneos_slider_editor_engine||[]).push([[130],{130:(e,t,s)=>{s.r(t),s.d(t,{ActionsManager:()=>A,AssetsManager:()=>M,CssManager:()=>Me,Factory:()=>h,MouseManager:()=>Q,Project:()=>de,THREE:()=>n});var a=s(909),n=s.t(a,2);const i=class{constructor(){this._events={"*":[]}}subs(e,t,s){null==this._events[e]&&(this._events[e]=[]),this._events[e].push({handler:s,once:t})}on(e,t){this.subs(e,!1,t)}once(e,t){this.subs(e,!0,t)}off(e,t){const s=this._events[e];if(s){for(let e=s.length-1;e>=0;e--)s[e].handler===t&&s.splice(e,1);0===s.length&&delete this._events[e]}}clear(e){this._events[e]=[]}clearAll(){this._events={"*":[]}}emit(e,...t){const s=[];this._events[e]&&s.push(...this._events[e]),this._events["*"].length&&s.push(...this._events["*"].map(t=>({handler:t.handler.bind(this,e),once:t.once})));for(let e=s.length-1;e>=0;e--){const a=s[e];a.handler.apply(null,t),a.once&&s.splice(e,1)}}addEventListener(e,t){this.on(e,t)}removeEventListener(e,t){this.off(e,t)}};function r(e){for(;e;){if(e.isElement)return e;e=e.parent}return null}function o(e,t){let s=1,a=e;for(;t.includes(a);)a=`${e}_${s}`,s++;return a}Array.prototype.remove=function(e){const t=this.findIndex(t=>t===e);if(t>=0)return this.splice(t,1)[0]};const c=class{#e;#t="";#s=!1;#a=!1;#n=!1;#i={};#r;constructor(e={}){this.#e=e.type,this.#t=e.label||"",this.#s=e.isModel||!1,this.#a=e.isAsset||!1,this.#n=e.isHelper||!1,this.#i=e.template,this.#r=e.module,this.create=e.create,this.decode=e.decode,this.encode=e.encode,this.verify=e.verify,this.add=e.add}get type(){return this.#e}get label(){return this.#t}get isModel(){return this.#s}get isAsset(){return this.#a}get isHelper(){return this.#n}get template(){return this.#i}get module(){return this.#r}decode(e){return null}encode(e){return{}}verify(e,t){return!0}check(e,t){return!0}};async function l(e){if(null===(t=e)||"object"!=typeof t&&"function"!=typeof t)return e;var t;if(Array.isArray(e))return Promise.all(e.map(e=>l(e)));if(e.uid&&d.instances.has(e.uid))return d.instances.get(e.uid);if(e.isAsset)return window.AssetsManager.GetResource(e.uid);const s=e.type;if(!s)return e;let a;Array.isArray(e.args)?a=await Promise.all(e.args.map(e=>l(e))):e.args&&(a=await Object.fromEntries(await Promise.all(Object.entries(e.args).map(async([e,t])=>[e,await l(t)]))));const i=a||[];let r,o,c=e.uid||`${s}_${Math.random().toString(36).slice(2,11)}`;d.typeRegistry.has(s)&&(o=d.typeRegistry.get(s),o.allow&&o.allow(e,i));try{r=o?.create?await o.create(i,e,c):o?.module?new o.module(...i,e):new n[s](...i)}catch(e){throw console.warn(`Error create object of type ${s}:`,e),new Error(`Error on create instance of ${s}`)}return r.uid=c,d.instances.set(r.uid,r),e.properties&&await Promise.all(Object.entries(e.properties).map(async([e,t])=>{r[e]=await l(t)})),r}class d{static instances=new Map;static typeRegistry=new Map;static emmiter=new i;static RemoveInstance(e){d.instances.has(e)&&d.instances.delete(e)}static AddInstance(e,t){console.log(t),console.log(e),e.uid=Math.random().toString(36).slice(2,11),e.name=o(e.type,Array.from(d.instances.values().map(e=>e.name))),e.isElement=!0,e.isModel=!0,e.states={},e.actions=[],e.blocked={},e.paths=t.paths?[...t.paths,e.uid]:[e.uid],e.path=e.paths.join(".");const s=d.typeRegistry.get(e.type);s&&s.verify&&s.verify(e,t);const a=d.typeRegistry.get(t.type);a&&a.verifyAdd&&a.verifyAdd(e,t),t.add(e),d.instances.set(e.uid,e),d.emmiter.emit("create",e)}static async BuildElement(e,t){const s=await l(e);s.isElement=!0,s.states=e.states||{},s.actions=e.actions||[],s.paths=t.paths?[...t.paths,s.uid]:[s.uid],s.path=s.paths.join("."),s.blocked={},s.name=e.name||o(s.type,Array.from(d.instances.values().map(e=>e.name)));const a=d.typeRegistry.get(e.type);a&&a.verify&&a.verify(s,t);const n=d.typeRegistry.get(t.type);return n&&n.check&&n.check(s,t),t.add(s),d.emmiter.emit("create",s),s}static CreateValue(e){return l(e)}static RegisterType(e){if(!e.type)throw new Error("RegisterType need type");d.typeRegistry.set(e.type,new c(e))}static createFromJSON(e){return l(e)}static exportToJSON(e){const t=function(e){let t={};e.args&&(t.args=e.args);const s=d.typeRegistry.get(e.type)||{};return s.encode&&(t={...t,...s.encode(e)}),e.encode&&(t={...t,...e.encode(e)}),t}(e);return t.uid=e.uid,t.states=e.states||{},t.actions=e.actions||[],t.name=e.name,t.paths=e.paths||[t.uid],t.path=t.paths.join("."),t.parent=e.parent?.uid,t}static GetTypes(){return Array.from(d.typeRegistry.values()).map(e=>({isModel:e.isModel,type:e.type,label:e.label}))}static GetType(e){return d.typeRegistry.get(e)}static findTypes(e){const t=e.toLowerCase();return d.GetTypes().filter(e=>e.type.toLowerCase().includes(t)||e.label.toLowerCase().includes(t))}static clearCache(){d.instances.clear()}static getCacheSize(){return d.instances.size}static GetInstance(e){return d.instances.get(e)}static GetInstances(){return Array.from(d.instances.values())}static isTypeRegistered(e){return d.typeRegistry.has(e)}static unRegisterType(e){d.typeRegistry.delete(e)}static getTypeConfig(e){return d.typeRegistry.get(e)}}const u=new Proxy(d,{get:(e,t)=>t in e?e[t]:u.emmiter[t]});window.Factory=u;const h=u,p=class extends i{constructor(e){super(),this.isAsset=!0,this.uses=new Set,this.data=e||{},this._clones=[],this.promise=null,this.progress=0,this._resource=null}get url(){return this.data.url}get uid(){return this.data.uid}get type(){return this.data.type}get name(){return this.data.name}set name(e){this.data.name=e}get resource(){if(this.data.clone){const e=this._resource.clone();return e.uid=`${this.uid}_${Date.now()}`,this._clones.push(e),e.traverse(e=>{e.visible=!0}),e}return this._resource}async getResource(){if(this.data.clone){const e=this._resource.clone();return e.uid=`${this.uid}_${Date.now()}`,this._clones.push(e),e.traverse(e=>{e.visible=!0}),e}return this._resource}get clone(){return this.data.clone}set clone(e){this.data.clone=e}async load(){}update(){}async load(){}async update(e,t){this.data[e]=t,this.emit("update",this)}destroy(){this._clones.forEach(e=>{e.parent&&e.parent.remove(e)}),this.emit("destroy",this)}get types(){return["asset"]}getTypes(){return["asset"]}};var m=s(92);var y=s(449);const g=new Map,w={model:class extends p{constructor(e){super(e),this._type="model",this.envMap=e.envMap,this.isModel=!0}get shadow(){return this.data.shadow||{}}set shadow(e){this.data.shadow=e}get type(){return this._type}get types(){return[...super.types,this._type]}toData(){}toModel(){return{type:this.resource.isMesh?"Mesh":"Group",args:{isAsset:!0,uid:this.uid}}}getTypes(){return[...super.getTypes(),"model"]}_updateEnvMap(e){this.data.envMap=e?e.uid:null;const t=e?e.resource:null;for(let e=0;e<this._clones.length;e++)this._clones[e].traverse(e=>{e.isMesh&&(e.material.envMap=t)});this._resource.traverse(e=>{e.isMesh&&(e.material.envMap=t)})}async _setEnvMap(e,t=!1){if(t||!e||e!==this.data.envMap){const t=this.data.envMap;let s=this.uses[t];if(s&&(delete this.uses[t],s.off("destroy",this._updateEnvMap.bind(this,null)),s.off("update",this._updateEnvMap.bind(this))),delete this.data.envMap,s=null,e){const t=this.data.envMap=e;if(s=this.uses[t]=await AssetsManager.FindAsset(t),!s)return;s.on("destroy",this._updateEnvMap.bind(this,null)),s.on("update",this._updateEnvMap.bind(this))}this._updateEnvMap(s)}}load(e){return new Promise(async t=>{const s=new THREE.LoadingManager;s.onStart=function(){},s.onProgress=function(t,s,a){const n=Math.round(s/a*100);e&&e(n)},s.onLoad=function(){};const a=new m.B(s);a.setResourcePath(this.url.replace(/[^/]*$/,""));const n=await a.loadAsync(this.url);this._resource=n.scene.children.length>1?n.scene:n.scene.children[0],this._resource.uid=this.uid,this.data.position&&this._resource.position.copy(this.data.position),this.data.rotation&&this._resource.rotation.set(this.data.rotation.x,this.data.rotation.y,this.data.rotation.z,"XYZ"),this.data.scale&&this._resource.scale.copy(this.data.scale),await this._setEnvMap(this.data.envMap,!0),this._resource.traverse(e=>{e.isMesh&&(e.castShadow=this.data.shadow?.cast||!1,e.receiveShadow=this.data.shadow?.receive||!1,e.geometry.computeBoundingBox())}),this.emit("change",this),t()})}async update(e,t){switch(e){case"url":await this.load();break;case"envMap":await this._setEnvMap(t);break;default:this._resource.traverse(e=>{e.isMesh&&(e.castShadow=this.data.shadow?.cast||!1,e.receiveShadow=this.data.shadow?.receive||!1)})}super.update(e,t)}},image:class extends p{constructor(e){super(e),this._type="image"}get type(){return this._type}get types(){return[...super.types,this.type]}toModel(){return{type:"planeimg",args:{isAsset:!0,url:this,uid:this.uid}}}getTypes(){return[...super.getTypes(),"image"]}get name(){return this.data.name||this.uid}set name(e){this.data.name=e}async load(){const e=await AssetsManager.Load(this,{type:"blob"}),t=await createImageBitmap(e),s=new THREE.CanvasTexture(t);s.colorSpace=THREE.SRGBColorSpace,s.encoding=THREE.sRGBEncoding,s.flipY=!0,s.flipX=!0,this._resource=s,this._resource.uid=this.uid,console.log(this._resource)}async update(e,t){"url"===e&&await this.load(),super.update(e,t)}},hdr:class extends p{constructor(e){super(e),this._type="hdr"}set url(e){this.data.url=e,this.load()}get type(){return this._type}get types(){return[...super.types,this.type]}getTypes(){return[...super.getTypes(),"hdr"]}load(){return new Promise(e=>{(new y.Y).load(this.data.url,t=>{console.log(t),t.mapping=a.EquirectangularReflectionMapping,this._resource=t,this._resource.asset=this,this._resource.uid=this.uid,this.emit("update",this),e()})})}async update(e,t,s){if(this.data[t]=e[t],"url"===t)return this.load(s)}}};let f=async(e,t={type:"text"})=>{const s=await fetch(e.url);return await s[t.type]()};class v{static get Assets(){return g}static SetLoader(e){f=e}static async*Init(e,t={}){console.log("AssetsManager Init");let s=0;const a=e.length,n=[];for(e.map(e=>v.Add(e)).forEach(e=>{e.load().then(()=>{s++,n.push(s/a)})});s<a;){for(;0===n.length;)await new Promise(e=>setTimeout(e,50));yield n.shift()}return"done"}static GetAsset(e){return g.get(e)}static GetAssets(e){const t=new Set(e);return[...g.values()].filter(e=>t.has(e.uid))}static GetResource(e){const t=g.get(e);if(t)return t._resource?t.resource:(t.promise||(t.promise=new Promise(async e=>{await t.load(),e(t.resource)})),t.promise)}static FindAsset(e){const t=g.get(e);if(t)return t.resource?t:(t.promise||(t.promise=new Promise(async e=>{await t.load(),e(t)})),t.promise)}static async SetAssetTo(e,t){g.get(t.uid).setTo(e)}static Load(e,t){return f(e,t)}static Add(e){const t=new(0,w[e.type])(e);return g.set(t.uid,t),t}static async Update(e,t,s){const a=g.get(e.uid);if(a)try{await a.update(t,s)}catch(e){console.warn(e)}}static Remove(e){g.has(e)&&(g.get(e).destroy(),g.delete(e))}}window.AssetsManager=v;const M=v,b={},E=[];function _(e,t,s=!1){try{const{handler:a,...n}=E.find(t=>t.uid===e.uid);if(n.single&&e.stop)return;e.stop=a(n,t,e,s)}catch(e){console.warn(e)}}function S(e,t){const s=[];for(const a of e)s.push(_(a,t));return Promise.allSettled(s)}const x=new i;class R{static Force=!1;static get Actions(){return E}static get Handlers(){return b}static FindHandler(e){return b[e]}static RegisterHandler(e,t){b[e]=t,E.forEach(t=>{t.type===e&&(t.handler=b[t.type])}),x.emit("register",e)}static Init(e){for(let t=0;t<e.length;t++)R.Add(e[t])}static Add(e){e.type in b&&(e.handler=b[e.type]),E.push(e),x.emit("add",e)}static Remove(e){const t=E.findIndex(t=>t.uid===e);if(t>=0){const e=E.splice(t,1),s=e[0];console.log(s),x.emit("remove",e)}}static Stop(e){for(let t=0;t<e.length;t++){const s=e[t];s.stop&&(s.stop(),s.stop=null)}}static Call(e,t,s=!1){return _(e,t,s)}static async Run(e=[],t,s){const a=e.filter(e=>e.hook===s);0!==a.length&&await S(a,t,R.Force)}static async Execute(e,t){const s=[];for(let a=0;a<e.length;a++){const n=e[a],i=n.actions?n.actions.filter(e=>e.hook===t):[];try{const e=n.model.actions?n.model.actions.filter(e=>e.hook===t):[];(i.length>0||e.length>0)&&s.push(S([...i,...e],n,R.Force))}catch(e){console.warn("Error execute action")}}await Promise.all(s)}}const A=new Proxy(R,{get:(e,t)=>t in e?e[t]:x[t]});var C=s(24),k=s(0);let T,P;const W=class{static MoveTo(e,t){const s={position:new a.Vector3,time:1e3,...e,control:!1},n={position:new a.Vector3,time:1e3,...t,control:!1};T.enabled=!1;const i=Workspace.Camera.position.clone(),r=T.target.clone();s.control=s.time>n.time,n.control=n.time>=s.time;const o=new Tween(i).to(s.position,s.time).easing(Easing.Quadratic.InOut).onUpdate(()=>{Workspace.Camera.position.copy(i),Workspace.Camera.updateProjectionMatrix(),T.update()}).onComplete(()=>{s.control&&(T.enabled=!0),tweengroup.remove(o)}).start(),c=new Tween(r).to(n.position,n.time).easing(Easing.Quadratic.InOut).onUpdate(()=>{T.target.copy(r),T.getPolarAngle()>T.maxPolarAngle&&T.target.setY(center.y+Math.cos(T.maxPolarAngle)*distance)}).onComplete(()=>{n.control&&(T.enabled=!0),tweengroup.remove(c)}).start();tweengroup.add(o,c)}static SetState(e){T.enabled=e}static Init({canvas:e},t,s){T=new C.N(t,e),T.enabled=!0,T.enableDamping=!0,T.dampingFactor=.25,T.screenSpacePanning=!1,T.minDistance=.01,T.maxDistance=500,P=new k.ZU(t,e),P.addEventListener("dragging-changed",e=>{T.enabled=!e.value});const n=P.getHelper();s.add(n),P.getRaycaster().layers.set(1),n.traverse(e=>{e.layers.set(1)}),window.addEventListener("keydown",e=>{switch(T.enabled=!e.ctrlKey,e.code){case"KeyQ":P.setSpace("local"===P.space?"world":"local");break;case"Shift":P.setTranslationSnap(1),P.setRotationSnap(a.MathUtils.degToRad(15)),P.setScaleSnap(.25);break;case"KeyW":P.setMode("translate");break;case"KeyE":P.setMode("rotate");break;case"KeyR":P.setMode("scale");break;case"KeyC":case"KeyV":break;case"+":case"=":P.setSize(P.size+.1);break;case"-":case"_":P.setSize(Math.max(P.size-.1,.1));break;case"KeyX":P.showX=!P.showX;break;case"KeyY":P.showY=!P.showY;break;case"KeyZ":P.showZ=!P.showZ;break;case" ":P.enabled=!P.enabled;break;case"Escape":P.reset()}}),window.addEventListener("keyup",e=>{T.enabled=!e.ctrlKey,"Shift"===e.key&&(P.setTranslationSnap(null),P.setRotationSnap(null),P.setScaleSnap(null))})}static get Transformer(){return P}static Select(e){e?P.attach(e):P.detach()}static Update(e){T.update(e)}static FitTo({center:e,radius:t}){const s=a.MathUtils.degToRad(Workspace.Camera.fov),n=t/Math.sin(s/2),i=(new a.Vector3).subVectors(Workspace.Camera.position,e).normalize(),r=e.clone().add(i.multiplyScalar(n)),o=Workspace.Camera.position.clone();T.enabled=!1;const c=T.target.clone(),l=new Tween(c).to(e,1e3).easing(Easing.Quadratic.InOut).onUpdate(()=>{T.target.copy(c),T.getPolarAngle()>T.maxPolarAngle&&T.target.setY(e.y+Math.cos(T.maxPolarAngle)*distance)}).start(),d=new Tween(o).to(r,1e3).easing(Easing.Quadratic.InOut).onUpdate(()=>{Workspace.Camera.position.copy(o);const t=Workspace.Camera.position.distanceTo(e);t<T.minDistance?Workspace.Camera.position.copy(e.clone().add(i.clone().multiplyScalar(T.minDistance))):t>T.maxDistance&&Workspace.Camera.position.copy(e.clone().add(i.clone().multiplyScalar(T.maxDistance))),Workspace.Camera.updateProjectionMatrix(),T.update()}).onComplete(()=>{T.enabled=!0,tweengroup.remove(d,l)}).start();tweengroup.add(d,l)}},I=new a.Raycaster,H=new i;let j,F,L,O;const $={x:0,y:0};let U,z=.03,D=.03,G=.01,B=.01,K=window.innerWidth/2,V=window.innerHeight/2;function Y(e){}function X(e){$.x=e.clientX,$.y=e.clientY,U=Date.now()}function q(e){if(Math.abs($.x-e.clientX)>10||Math.abs($.y-e.clientY)>10||Date.now()-U>500)return;const t=new a.Vector2,s=O.getBoundingClientRect(),n=e.clientX-s.left,i=e.clientY-s.top;t.x=n/O.clientWidth*2-1,t.y=-i/O.clientHeight*2+1,I.setFromCamera(t,F);const o=I.intersectObjects(j.children,!0);if(0===o.length)return;const c=[];for(let e=0;e<o.length;e++){const t=r(o[e].object);if(t.visible&&!c.includes(t))return c.push(t),void H.emit("click",t)}}const Q=new Proxy(class{static get Control(){return W}static Init(e,t,s,a,n){const i={camera:{range:{x:.01,y:.01},movespeed:{x:.03,y:.03}},...n};j=a,L=s,F=t,O=e,z=i.camera.movespeed.x,D=i.camera.movespeed.y,G=i.camera.range.x,B=i.camera.range.y,K=window.innerWidth/2,V=window.innerHeight/2,e.addEventListener("click",q.bind(null)),e.addEventListener("mousemove",Y,!1),e.addEventListener("mousedown",X,!1)}static Update(e){}static SetCamera(e){F=e}},{get:(e,t)=>t in e?e[t]:H[t]});let Z,N,J,ee,te,se,ae,ne=[];const ie=new i,re=[];function oe(e){for(let t=0;t<ne.length;t++)ne[t](e);ee.render(J,ae)}class ce{static get Root(){return te}static get Scene(){return J}static get Camera(){return ae}static get Canvas(){return Z}static get Renderer(){return ee}static Init(e){Z=e,N=new a.Clock,J=new a.Scene,ee=new a.WebGLRenderer({canvas:e,alpha:!0,powerPreference:"high-performance",antialias:!0,stencil:!1});const t=Z.clientWidth,s=Z.clientHeight;ee.setSize(t,s,!1),ee.setPixelRatio(window.devicePixelRatio),ee.shadowMap.enabled=!0,ee.shadowMap.type=a.PCFSoftShadowMap,te=new a.Object3D,te.receiveShadow=!0,te.castShadow=!0,J.add(te)}static Start(){se=ae=new a.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.01,1e3),ae.uid="PlayCamera",J.add(ae),ae.position.set(0,10,30),ae.layers.enable(0),ae.layers.disable(1),ee.setAnimationLoop(oe),Q.Init(ee.domElement,ae,J,te),Q.on("click",e=>{console.log(e),A.Run([...e.actions,...e.state?e.state.actions:[]],e,"mouse.click")})}static AddToUpdate(e){ne.push(e)}static RemoveFromUpdate(e){const t=ne.indexOf(e);t>=0&&ne.splice(t,1)}static ResetCamera(){ce.SetCamera(se)}static SetCamera(e){ae.visible=!1,ae=e;const t=ee.domElement.clientWidth,s=ee.domElement.clientHeight;ae.aspect=t/s,ae.updateProjectionMatrix(),ae.visible=!0,ae.layers.enable(0),ae.layers.disable(1),ie.emit("setcamera",ae),Q.SetCamera(ae)}static async Build(e){const t=await h.BuildElements(e,te);return t.forEach(e=>e.visible=!1),re.push(...t),t}static FindBlock(e){return re.find(t=>t.uid===e)}static FindElement(e){console.log(e);let t=te;for(let s=0;s<e.length;s++)t=t.children.find(t=>t.uid===e[s]);return t}static async SetAsset(e,t){const s=await M.GetAsset({uid:t.uid}),a=e.split(".");let n=re.find(e=>e.uid===a[0]);for(let e=1;e<a.length;e++)n=n.children.find(t=>t.uid===a[e]);n.addAsset(t,s)}static RemoveAsset(e,t){const s=e.split(".");let a=re.find(e=>e.uid===s[0]);for(let e=1;e<s.length;e++)a=a.children.find(t=>t.uid===s[e]);a.removeAsset(t)}static RemoveElement(e){const t=e.split(".");let s=re;for(let e=0;e<t.length-1;e++){const a=s.find(s=>s.uid===t[e]);s=a.children}const a=s.findIndex(t=>t.path===e);if(a>=0){const e=s.splice(a,1);e[0].parent.remove(e[0])}}}const le=new Proxy(ce,{get:(e,t)=>t in e?e[t]:ie[t]});window.Project=le;const de=le;let ue;const he=new i;class pe{static Init(e,t){ue=new ve({element:e}),ue.setSize(window.innerWidth,window.innerHeight),ue.elements.length=0;const s=t.clientWidth,a=t.clientHeight,n=s/ue.domElement.offsetWidth,i=a/ue.domElement.offsetHeight;ue.domElement.style.transform=`scale(${n}, ${i})`,de.AddToUpdate(pe.Render)}static SetScale(e,t){const s=e/ue.domElement.offsetWidth,a=t/ue.domElement.offsetHeight;ue.domElement.style.transform=`scale(${s}, ${a})`}static Render(){ue.render(de.Scene,de.Camera)}static async OnRemove(e,t){e.isUIElement&&(await t.removeElement(e.element),ue.elements.remove(e))}static async OnCreate(e,t,s){if(console.log("Create CSS"),e.isUIElement){e.on("click",()=>{A.Run([...e.actions||[],...e.states[s.actived.uid]?.actions||[]],e,"mouse.click")});try{const s=await t.addElement(e.data.element.component||"UILabel",{data:{...e.data.element,path:e.path},events:e.data.events||{}});e.setElement(s.data,s.element)}catch(e){return}ue.elements.push(e)}}}const me=new a.Vector3,ye=new a.Matrix4,ge=new a.Matrix4,we=new a.Vector3,fe=new a.Vector3;class ve{constructor(e={}){const t=this;let s,a,n,i;const r={objects:new WeakMap},o=void 0!==e.element?e.element:document.createElement("div");function c(e,s,a){me.setFromMatrixPosition(e.matrixWorld),me.applyMatrix4(ge);const c=me.z>=-1&&me.z<=1&&!0===e.layers.test(a.layers),l=e.element;!0===c&&(e.onBeforeRender(t,s,a),l.style.transform=`translate(${-100*e.center.x}%, ${-100*e.center.y}%) translate(${me.x*n+n}px, ${-me.y*i+i}px)`,l.parentNode!==o&&o.appendChild(l),e.onAfterRender(t,s,a));const d={distanceToCameraSquared:(u=a,h=e,we.setFromMatrixPosition(u.matrixWorld),fe.setFromMatrixPosition(h.matrixWorld),we.distanceToSquared(fe))};var u,h;r.objects.set(e,d);for(let t=0,s=e.children.length;t<s;t++);}o.style.overflow="hidden",this.domElement=o,this.elements=[],this.getSize=function(){return{width:s,height:a}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),ye.copy(t.matrixWorldInverse),ge.multiplyMatrices(t.projectionMatrix,ye);for(let s=0;s<this.elements.length;s++)c(this.elements[s],e,t);!function(e){const t=function(e){const t=[];for(let s=e.length-1;s>=0;s--)e[s].traverseVisible(function(e){e.isCSS2DObject&&t.push(e)});return t}(e).sort(function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:r.objects.get(e).distanceToCameraSquared-r.objects.get(t).distanceToCameraSquared}),s=t.length;for(let e=0,a=t.length;e<a;e++)t[e].element.style.zIndex=s-e}(this.elements)},this.setSize=function(e,t){s=e,a=t,n=s/2,i=a/2,o.style.width=e+"px",o.style.height=t+"px"}}}const Me=new Proxy(pe,{get:(e,t)=>t in e?e[t]:he[t]})}}]);