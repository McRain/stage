"use strict";(self.webpackChunk_reneos_3d_editor_engine=self.webpackChunk_reneos_3d_editor_engine||[]).push([[614],{30:(t,s,e)=>{e.r(s),e.d(s,{default:()=>a});var i=e(909);class o extends i.Object3D{static get IsElement(){return!0}constructor(t){super(),this.prototypes=["base"],this.isElement=!0,this.isBase=!0,this.uid=t.uid,this.data={...t},this.type="element",this.path="",this.paths=[],this.state=null,this.actions=[]}exportData(t){const{model:s,children:e,...i}=this.data||t,o=JSON.parse(JSON.stringify(i));if(this.data.rotation&&(o.rotation={x:this.data.rotation.x,y:this.data.rotation.y,z:this.data.rotation.z}),e){o.children=[];for(let t=0;t<e.length;t++){const s=e[t],i=this.children.find(t=>t.uid===s.uid);o.children[t]=i.exportData?i.exportData():JSON.parse(JSON.stringify(i.data||{}))}}return o}addAction(t){this.actions.push(t)}removeAction(t,s){const e=this.data.actions.findIndex(e=>e.uid===t&&e.hook===s);e>=0&&this.data.actions.splice(e,1)}get model(){return this}find(t){const s=t.split(".");let e=this;for(let t=0;t<s.length;t++)e=this.children.find(e=>e.uid===s[t]),list=e.children;return e}}const a=o},614:(t,s,e)=>{e.r(s),e.d(s,{default:()=>a});var i=e(30);class o extends i.default{constructor(t){super(t),this.prototypes.push("model"),this.isModel=!0,this.type="model",this.assets=[]}setAssets(t,s){console.log("setAssets");for(let e=0;e<s.length;e++)this.setAsset(t[e],s[e])}setAsset(t,s){t&&(t.on("update",this.updateAsset.bind(this,s)),this.updateAsset(s,t))}updateAsset(t,s){this.removeAsset(s.uid),this.add(s.resource),this.traverse(t=>[t.visible=this.visible])}removeAsset(t){const s=this.children.find(s=>s.uid===t);s&&this.remove(s)}addAsset(t,s){console.log("addAsset"),s.position.copy(t.position||{x:0,y:0,z:0}),s.rotation.setFromVector3(t.rotation||{x:0,y:0,z:0},"XYZ"),s.scale.copy(t.scale||{x:1,y:1,z:1}),t.quaternion&&s.quaternion.copy(t.quaternion),s.traverse(t=>{t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0,t.geometry.computeBoundingBox())}),this.add(s)}}const a=o}}]);