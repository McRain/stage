"use strict";(self.webpackChunk_reneos_3d_editor=self.webpackChunk_reneos_3d_editor||[]).push([[140],{4546:(e,t,l)=>{l.d(t,{A:()=>b});var o=l(5421);const n=["draggable","droppable"],a={class:"roottree"},r=["draggable"],s={class:"tree-node-content"},i={class:"selector"},d=["checked"],c={key:0,class:"prepender"},p=["title"],u={key:1,class:"appender"},m={key:0,class:"children"},h={key:1};function v(e,t){for(let l=0;l<e.length;l++)e[l].isSelected=t,e[l].children&&v(e[l].children,t)}const g={name:"TreeNode",props:{node:{type:Object,required:!0},selector:{type:Boolean,default:!0},index:{type:Number},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"childrens"},filter:{type:Function},draggable:{type:Boolean,default:!0},droppable:{type:Boolean,default:!0}},computed:{list(){return this.filter?this.filter(this.node[this.childsFiled]):this.node[this.childsFiled]}},data:()=>({expanded:{},childloaded:{},isLoading:!1,selectChangeEvent:(0,o.inject)("selectChangeEvent",null),clickNodeEvent:(0,o.inject)("clickNodeEvent",null),dropNodeEvent:(0,o.inject)("nodeDropEvent",null),isDragOver:!1}),methods:{onDragStart(e){this.$app.app.draggedNode=this.node,e.dataTransfer.effectAllowed="copy"},onDragOver(e){e.dataTransfer.dropEffect="copy",this.isDragOver=!0},onDragEnter(e){this.isDragOver=!0,!this.expanded[this.node.uid]&&this.node[this.childsFiled]?.length&&this.toggleExpand()},onDragLeave(){this.isDragOver=!1},onDrop(e){this.isDragOver=!1,this.dropNodeEvent({target:this.node,source:this.$app.app.draggedNode})},async toggleExpand(){this.node[this.childsFiled]&&0!==this.node[this.childsFiled].length&&(this.expanded[this.node.uid]=!this.expanded[this.node.uid],this.expanded[this.node.uid]&&!this.childloaded[this.node.uid]&&await this.loadChildren(),this.$emit("updateExpanded",this.node))},async loadChildren(){this.childloaded[this.node.uid]=!0},onChildSelectChange(e){},onCheckboxChange(e){e.isSelected=!e.isSelected,e[this.childsFiled]?.length&&v(e[this.childsFiled],e.isSelected),this.selectChangeEvent(this.node),this.$emit("changeSelection",this.node)},selectNode(e){this.clickNodeEvent(this.node)}}};var f=l(6262);const y={components:{TreeNode:(0,f.A)(g,[["render",function(e,t,l,n,a,v){const g=(0,o.resolveComponent)("TreeNode",!0);return(0,o.openBlock)(),(0,o.createElementBlock)("li",{class:(0,o.normalizeClass)(["tree-node",{"drag-over":a.isDragOver}]),draggable:l.draggable,onDragstart:t[3]||(t[3]=(0,o.withModifiers)(e=>l.draggable&&v.onDragStart(e),["stop"])),onDragover:t[4]||(t[4]=(0,o.withModifiers)((...e)=>v.onDragOver&&v.onDragOver(...e),["prevent"])),onDragenter:t[5]||(t[5]=(0,o.withModifiers)((...e)=>v.onDragEnter&&v.onDragEnter(...e),["prevent"])),onDragleave:t[6]||(t[6]=(...e)=>v.onDragLeave&&v.onDragLeave(...e)),onDrop:t[7]||(t[7]=(0,o.withModifiers)((...e)=>v.onDrop&&v.onDrop(...e),["prevent","stop"]))},[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("span",{class:"collapser",onClick:t[0]||(t[0]=(...e)=>v.toggleExpand&&v.toggleExpand(...e))},[v.list?.length?(0,o.renderSlot)(e.$slots,"icon",{key:0,node:l.node},()=>[(0,o.createTextVNode)((0,o.toDisplayString)(a.expanded[l.node.uid]?"▼":"▶"),1)],!0):(0,o.createCommentVNode)("v-if",!0)]),(0,o.createElementVNode)("span",i,[l.selector?(0,o.renderSlot)(e.$slots,"checkbox",{key:0},()=>[(0,o.createElementVNode)("input",{ref:"checkedInput",type:"checkbox",onChange:t[1]||(t[1]=e=>v.onCheckboxChange(l.node)),checked:l.node.isSelected},null,40,d)],!0):(0,o.createCommentVNode)("v-if",!0)]),e.$slots.prepend?((0,o.openBlock)(),(0,o.createElementBlock)("span",c,[(0,o.renderSlot)(e.$slots,"prepend",{node:l.node},void 0,!0)])):(0,o.createCommentVNode)("v-if",!0),(0,o.createElementVNode)("span",{class:"labeler",title:l.node.uid,onClick:t[2]||(t[2]=(...e)=>v.selectNode&&v.selectNode(...e))},[(0,o.renderSlot)(e.$slots,"label",{node:l.node},()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(l.node.uid)+"|",1)],!0)],8,p),e.$slots.append?((0,o.openBlock)(),(0,o.createElementBlock)("span",u,[(0,o.renderSlot)(e.$slots,"append",{node:l.node,index:l.index},void 0,!0)])):(0,o.createCommentVNode)("v-if",!0)]),a.expanded[l.node.uid]&&Array.isArray(v.list)&&v.list.length?((0,o.openBlock)(),(0,o.createElementBlock)("ul",m,[a.childloaded[l.node.uid]?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(v.list,t=>((0,o.openBlock)(),(0,o.createBlock)(g,{draggable:l.draggable,onChangeSelection:v.onChildSelectChange,filter:l.filter,selector:l.selector,focused:t.focused,key:t.uid,node:t,childsFiled:l.childsFiled},(0,o.createSlots)({_:2},[(0,o.renderList)(e.$slots,(t,l)=>({name:l,fn:(0,o.withCtx)(t=>[(0,o.renderSlot)(e.$slots,l,(0,o.mergeProps)({ref_for:!0},t),void 0,!0)])}))]),1032,["draggable","onChangeSelection","filter","selector","focused","node","childsFiled"]))),128)):((0,o.openBlock)(),(0,o.createElementBlock)("div",h," load... "))])):(0,o.createCommentVNode)("v-if",!0)],42,r)}],["__scopeId","data-v-ec22d48c"]])},computed:{list(){return this.filter?this.filter(this.tree):this.tree}},data:()=>({expandeds:{},isDragOver:!1}),props:{tree:{type:Array,required:!0},selector:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"children"},filter:{type:Function},draggable:{type:Boolean,default:!1},droppable:{type:Boolean,default:!1}},setup(e,{slots:t,emit:l}){(0,o.provide)("clickNodeEvent",e=>{l("clickNode",e)}),(0,o.provide)("selectChangeEvent",e=>{l("changeSelect",e)}),(0,o.provide)("nodeDropEvent",e=>{l("node-drop",e)})},methods:{onDragOver(e){e.dataTransfer.dropEffect="copy",this.isDragOver=!0},onDragEnter(e){this.isDragOver=!0},onDragLeave(){this.isDragOver=!1},onDrop(e){this.isDragOver=!1,this.$app?.app?.draggedNode&&(console.log(this.$app?.app?.draggedNode),this.$emit("node-drop",{target:null,source:this.$app.app.draggedNode}))},onUpdateExpanded(e){},findNodeByUid(e,t){for(let l of e){if(l.uid===t)return l;if(l.children){let e=this.findNodeByUid(l.children,t);if(e)return e}}return null},removeNodeFromTree(e,t){for(let l=0;l<e.length;l++){if(e[l].uid===t)return e.splice(l,1),!0;if(e[l][this.childsFiled]&&this.removeNodeFromTree(e[l][this.childsFiled],t))return!0}return!1}}},b=(0,f.A)(y,[["render",function(e,t,l,r,s,i){const d=(0,o.resolveComponent)("TreeNode");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["treecontainer",{"drag-over":s.isDragOver}]),draggable:l.draggable,droppable:l.droppable,onDrop:t[0]||(t[0]=(0,o.withModifiers)((...e)=>i.onDrop&&i.onDrop(...e),["prevent","stop"])),onDragover:t[1]||(t[1]=(0,o.withModifiers)((...e)=>i.onDragOver&&i.onDragOver(...e),["prevent"])),onDragenter:t[2]||(t[2]=(0,o.withModifiers)((...e)=>i.onDragEnter&&i.onDragEnter(...e),["prevent"])),onDragleave:t[3]||(t[3]=(...e)=>i.onDragLeave&&i.onDragLeave(...e))},[(0,o.createElementVNode)("ul",a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.list,(t,n)=>((0,o.openBlock)(),(0,o.createBlock)(d,{key:t.uid,filter:l.filter,selector:l.selector,node:t,index:n,focused:l.focused,childsFiled:l.childsFiled,onUpdateExpanded:i.onUpdateExpanded,draggable:l.draggable,droppable:l.droppable},(0,o.createSlots)({_:2},[(0,o.renderList)(e.$slots,(t,l)=>({name:l,fn:(0,o.withCtx)(t=>[(0,o.renderSlot)(e.$slots,l,(0,o.mergeProps)({ref_for:!0},t),void 0,!0)])}))]),1032,["filter","selector","node","index","focused","childsFiled","onUpdateExpanded","draggable","droppable"]))),128))])],42,n)}],["__scopeId","data-v-48ce72d0"]])},5956:(e,t,l)=>{l.r(t),l.d(t,{ActionEdit:()=>He.A,ActionItem:()=>We,ActionsLib:()=>ze,AudioControl:()=>ae,BoolEdit:()=>K.A,CustomInput:()=>b,DimensionsEdit:()=>Te.A,EditColor:()=>fe,EulerBlock:()=>de.A,ExpandedButton:()=>o.A,ExtMenu:()=>m.A,FileSelect:()=>Se,Float:()=>J,FloatBlock:()=>re.A,FontSize:()=>Oe.A,Icon:()=>n.A,ImageView:()=>Ve,Int:()=>G,ItemsLib:()=>Ge.A,Label:()=>Ie.A,LabelEdit:()=>ue.A,LoginForm:()=>Je.A,Modal:()=>a.A,PopupList:()=>r.A,ProjectItem:()=>Xe.A,QuaternionBlock:()=>ce.A,RadioButton:()=>C,SectionSelect:()=>Fe,Selectable:()=>O,ShadowEdit:()=>$e.A,SimpleButton:()=>s.A,SlideBlock:()=>A.A,SlideScroller:()=>u.A,Spinner:()=>d.A,TextColorEdit:()=>Le.A,TextEdit:()=>pe.A,Toast:()=>p.A,Toasts:()=>c.A,ToggleButton:()=>i.A,TransformEdit:()=>me.A,TreeLi:()=>x.A,TwoSideBool:()=>Ce,UILabel:()=>Ze.A,V3:()=>se.A,V3block:()=>ie.A,confirmform:()=>Qe.A,params:()=>H.A,queryform:()=>Ye.A,vlist:()=>z});var o=l(823),n=l(6222),a=l(6488),r=l(3373),s=l(5499),i=l(2262),d=l(8663),c=l(7546),p=l(8092),u=l(4775),m=l(1255),h=l(5421);const v={class:"input-wrapper"},g=["type","value","placeholder"],f={name:"MinimalInput",props:{type:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:String,default:""}},emits:["update:value"]};var y=l(6262);const b=(0,y.A)(f,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",v,[(0,h.createElementVNode)("input",{type:l.type,value:l.value,onInput:t[0]||(t[0]=t=>e.$emit("update:value",t.target.value)),placeholder:l.placeholder,class:"input-field"},null,40,g)])}],["__scopeId","data-v-f47b63dc"]]),E={class:"radio-group"},V={class:"radio-label"},k=["name","value","checked","disabled","onChange"],N={class:"radio-custom"},B={class:"radio-text"},S={class:"radio-default-label"},D={name:"RadioButton",props:{options:{type:[Array,Number],required:!0,validator:e=>Array.isArray(e)||"number"==typeof e&&e>0},modelValue:{type:[String,Number,Boolean,Object],default:null},name:{type:String,default:"radio-group"},disabled:{type:Boolean,default:!1},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"}},emits:["update:modelValue","change"],computed:{normalizedOptions(){return"number"==typeof this.options?Array.from({length:this.options},(e,t)=>t+1):this.options}},methods:{getOptionValue(e){return"object"==typeof e&&null!==e&&(e[this.valueKey]||e.value)||e},getOptionLabel(e){return"object"==typeof e&&null!==e?e[this.labelKey]||e.label||this.getOptionValue(e):e},isChecked(e){return this.getOptionValue(e)===this.modelValue},handleChange(e){const t=this.getOptionValue(e);this.$emit("update:modelValue",t),this.$emit("change",t)}}},C=(0,y.A)(D,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",E,[((0,h.openBlock)(!0),(0,h.createElementBlock)(h.Fragment,null,(0,h.renderList)(l.options,(t,o)=>((0,h.openBlock)(),(0,h.createElementBlock)("div",{key:o,class:(0,h.normalizeClass)(["radio-item",{"radio-item--disabled":l.disabled}])},[(0,h.createElementVNode)("label",V,[(0,h.createElementVNode)("input",{type:"radio",name:l.name,value:a.getOptionValue(t),checked:a.isChecked(t),disabled:l.disabled,onChange:e=>a.handleChange(t),class:"radio-input"},null,40,k),(0,h.createCommentVNode)(" Кастомная кнопка через слот "),(0,h.createElementVNode)("span",N,[(0,h.renderSlot)(e.$slots,"button",{option:t,index:o,checked:a.isChecked(t)},()=>[(0,h.createElementVNode)("span",{class:(0,h.normalizeClass)(["radio-default-button",{"radio-default-button--checked":a.isChecked(t)}])},null,2)],!0)]),(0,h.createCommentVNode)(" Кастомная надпись через слот "),(0,h.createElementVNode)("span",B,[(0,h.renderSlot)(e.$slots,"label",{option:t,index:o,checked:a.isChecked(t)},()=>[(0,h.createElementVNode)("span",S,(0,h.toDisplayString)(a.getOptionLabel(t)),1)],!0)])])],2))),128))])}],["__scopeId","data-v-65d75466"]]);var A=l(2300),x=l(5805);const w={class:"selectable-container"},F={class:"list"},I={class:"grid"},$=["onClick"],T={key:0,class:"info"},L={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},O=(0,y.A)(L,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",w,[(0,h.createElementVNode)("div",F,[(0,h.createElementVNode)("div",I,[((0,h.openBlock)(!0),(0,h.createElementBlock)(h.Fragment,null,(0,h.renderList)(l.list,(t,l)=>((0,h.openBlock)(),(0,h.createElementBlock)("div",{onClick:e=>a.onItemSelect(t),class:"grid-element",key:l},[(0,h.renderSlot)(e.$slots,"item",{item:t})],8,$))),128))])]),n.current?((0,h.openBlock)(),(0,h.createElementBlock)("div",T,[(0,h.renderSlot)(e.$slots,"selected",{item:n.current})])):(0,h.createCommentVNode)("v-if",!0)])}]]),M={class:"vlist-container"},_={class:"list"},j={class:"vlist"},U=["onClick"],P={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},z=(0,y.A)(P,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",M,[(0,h.createElementVNode)("div",_,[(0,h.createElementVNode)("div",j,[((0,h.openBlock)(!0),(0,h.createElementBlock)(h.Fragment,null,(0,h.renderList)(l.list,(t,l)=>((0,h.openBlock)(),(0,h.createElementBlock)("div",{onClick:e=>a.onItemSelect(t),class:"vlist-element",key:l},[(0,h.renderSlot)(e.$slots,"item",{item:t})],8,U))),128))])])])}]]);var K=l(9482);const R={class:"comma-number-input-wrapper"},q={class:"arrow-buttons"},W={name:"input-float",props:{value:Object,modelValue:Number,step:{type:Number,default:1},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER}},data:()=>({interval:null,separator:",",isPressed:!1,changeSpeed:100}),computed:{formattedValue:{get(){return this.modelValue},set(e){console.log(e),this.parseNumber(e),this.$emit("update:modelValue",e)}}},mounted(){const e=(new Intl.NumberFormat).format(this.modelValue);this.separator=e.charAt(1),this.$refs.input.addEventListener("wheel",this.onWheel,{passive:!1})},beforeDestroy(){this.$refs.input.removeEventListener("wheel",this.onWheel)},methods:{onFocus(){this.$nextTick(()=>{this.$refs.input.select()})},parseNumber(e){try{const t=parseFloat(e.replace(",","."));return isNaN(t)?this.modelValue:t}catch(e){return this.modelValue}},formatNumber:e=>parseFloat(e).toFixed(0).replace(".",","),onInput(e){this.formattedValue=e.target.modelValue},onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement===this.$refs.input&&this.changeValue(e.deltaY>0?-this.step:this.step)},onKeyDown(e){"ArrowUp"===e.key?(this.changeValue(this.step),e.preventDefault()):"ArrowDown"===e.key&&(this.changeValue(-this.step),e.preventDefault())},changeValue(e){let t=(this.modelValue||0)+e;t=Math.max(Math.min(t,this.max),this.min),this.$emit("update:modelValue",parseFloat(t.toFixed(0)))},startIncrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(this.step),50))},400)},startDecrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(-this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(-this.step),50))},400)},stopChange(){this.isPressed=!1,clearInterval(this.interval)}}},G=(0,y.A)(W,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",R,[(0,h.withDirectives)((0,h.createElementVNode)("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=e=>a.formattedValue=e),onKeydown:t[1]||(t[1]=(...e)=>a.onKeyDown&&a.onKeyDown(...e)),onDblclick:t[2]||(t[2]=(...e)=>a.onFocus&&a.onFocus(...e)),class:"comma-number-input"},null,544),[[h.vModelText,a.formattedValue,void 0,{number:!0}]]),(0,h.createElementVNode)("div",q,[(0,h.createElementVNode)("button",{onMousedown:t[3]||(t[3]=(...e)=>a.startIncrement&&a.startIncrement(...e)),onMouseup:t[4]||(t[4]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[5]||(t[5]=(...e)=>a.stopChange&&a.stopChange(...e))},"▲",32),(0,h.createElementVNode)("button",{onMousedown:t[6]||(t[6]=(...e)=>a.startDecrement&&a.startDecrement(...e)),onMouseup:t[7]||(t[7]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[8]||(t[8]=(...e)=>a.stopChange&&a.stopChange(...e))},"▼",32)])])}]]);var H=l(8549);const X={class:"comma-number-input-wrapper"},Y={class:"arrow-buttons"},Q={name:"CommaNumberInput",props:{modelValue:Number,step:{type:Number,default:.1},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},decimals:{type:Number,default:2}},data:()=>({interval:null,separator:",",isPressed:!1,changeSpeed:100}),computed:{formattedValue:{get(){return this.modelValue},set(e){const t=this.parseNumber(e);this.$emit("update:modelValue",t)}}},mounted(){const e=(new Intl.NumberFormat).format(this.modelValue);this.separator=e.charAt(1),this.$refs.input.addEventListener("wheel",this.onWheel,{passive:!1})},beforeDestroy(){this.$refs.input.removeEventListener("wheel",this.onWheel)},methods:{onFocus(){this.$nextTick(()=>{this.$refs.input.select()})},parseNumber(e){try{const t=parseFloat(e.replace(",","."));return isNaN(t)?this.modelValue:t}catch(e){return this.modelValue}},formatNumber(e){return parseFloat(e).toFixed(this.decimals).replace(".",",")},onInput(e){this.formattedValue=e.target.modelValue},onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement===this.$refs.input&&this.changeValue(e.deltaY>0?-this.step:this.step)},onKeyDown(e){"ArrowUp"===e.key?(this.changeValue(this.step),e.preventDefault()):"ArrowDown"===e.key&&(this.changeValue(-this.step),e.preventDefault())},changeValue(e){let t=(this.modelValue||0)+e;t=Math.max(Math.min(t,this.max),this.min),this.$emit("update:modelValue",parseFloat(t.toFixed(this.decimals)))},startIncrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(this.step),50))},400)},startDecrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(-this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(-this.step),50))},400)},stopChange(){this.isPressed=!1,clearInterval(this.interval)}}},J=(0,y.A)(Q,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",X,[(0,h.withDirectives)((0,h.createElementVNode)("input",{ref:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.formattedValue=e),onKeydown:t[1]||(t[1]=(...e)=>a.onKeyDown&&a.onKeyDown(...e)),onDblclick:t[2]||(t[2]=(...e)=>a.onFocus&&a.onFocus(...e)),class:"comma-number-input"},null,544),[[h.vModelText,a.formattedValue]]),(0,h.createElementVNode)("div",Y,[(0,h.createElementVNode)("button",{onMousedown:t[3]||(t[3]=(...e)=>a.startIncrement&&a.startIncrement(...e)),onMouseup:t[4]||(t[4]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[5]||(t[5]=(...e)=>a.stopChange&&a.stopChange(...e))},"▲",32),(0,h.createElementVNode)("button",{onMousedown:t[6]||(t[6]=(...e)=>a.startDecrement&&a.startDecrement(...e)),onMouseup:t[7]||(t[7]=(...e)=>a.stopChange&&a.stopChange(...e)),onMouseleave:t[8]||(t[8]=(...e)=>a.stopChange&&a.stopChange(...e))},"▼",32)])])}]]),Z={class:"control-container"},ee=["max"],te={class:"buttons"},le=["disabled"],oe=["disabled"],ne={__name:"playcontrol",props:{modelValue:{type:Object},selected:{type:Object},value:{type:Object},target:{type:Object},property:{type:Object}},setup(e){const t=e,l=(0,h.ref)(!1),o=(0,h.ref)(0),n=(0,h.ref)(0),a=(0,h.ref)(0),r=(0,h.ref)(!1),s=(0,h.ref)(!1);function i(){const e=t.modelValue;s.value?e.pause():e.play()}function d(){t.modelValue.pause(),t.modelValue.currentTime=0}function c(){r.value=!1;const e=t.modelValue;if(l.value&&a.value<=e.duration)if(e.readyState<2){const t=()=>{e.currentTime=a.value,e.removeEventListener("canplay",t)};e.addEventListener("canplay",t),e.load()}else e.currentTime=a.value}function p(e){return!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}return(0,h.onMounted)(()=>{const e=t.modelValue,i=()=>{e.readyState>=1&&(o.value=e.duration,l.value=!0)},d=()=>{r.value||(n.value=e.currentTime,a.value=e.currentTime)},c=()=>s.value=!0,p=()=>s.value=!1,u=()=>s.value=!1;e.addEventListener("loadedmetadata",i),e.addEventListener("canplay",i),e.addEventListener("timeupdate",d),e.addEventListener("play",c),e.addEventListener("playing",c),e.addEventListener("pause",p),e.addEventListener("ended",u),i(),(0,h.onUnmounted)(()=>{e.removeEventListener("loadedmetadata",i),e.removeEventListener("canplay",i),e.removeEventListener("timeupdate",d),e.removeEventListener("play",c),e.removeEventListener("playing",c),e.removeEventListener("pause",p),e.removeEventListener("ended",u)})}),(e,t)=>{const u=(0,h.resolveComponent)("icon");return(0,h.openBlock)(),(0,h.createElementBlock)("div",Z,[(0,h.createElementVNode)("span",null,(0,h.toDisplayString)(p(n.value))+" / "+(0,h.toDisplayString)(p(o.value)),1),(0,h.withDirectives)((0,h.createElementVNode)("input",{type:"range",min:"0",max:o.value,step:"0.01","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onMousedown:t[1]||(t[1]=e=>r.value=!0),onMouseup:c,onTouchstart:t[2]||(t[2]=e=>r.value=!0),onTouchend:c},null,40,ee),[[h.vModelText,a.value,void 0,{number:!0}]]),(0,h.createElementVNode)("div",te,[(0,h.createElementVNode)("button",{class:"btn square",onClick:i,disabled:!l.value},[(0,h.createVNode)(u,{value:s.value?"pause2":"play3"},null,8,["value"])],8,le),(0,h.createCommentVNode)(' <button class="btn square" @click="pause" :disabled="!ready">\r\n                <icon value="pause2"></icon>\r\n            </button> '),(0,h.createElementVNode)("button",{class:"btn square",onClick:d,disabled:!l.value},[(0,h.createVNode)(u,{value:"stop2"})],8,oe)])])}}},ae=(0,y.A)(ne,[["__scopeId","data-v-ae734b3c"]]);var re=l(8992),se=l(4910),ie=l(8193),de=l(8493),ce=l(2578),pe=l(4831),ue=l(320),me=l(7520);const he={style:{display:"grid","grid-template-columns":"96px 1fr"}};var ve=l(3842);const ge={name:"EditColor",props:{modelValue:{type:Object}},computed:{val:{get(){return`#${this.modelValue?.getHexString()||"ffffff"}`},set(e){this.modelValue&&this.modelValue.set(e),this.$emit("update:modelValue",this.modelValue||new ve.Color(e))}}}},fe=(0,y.A)(ge,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",he,[(0,h.withDirectives)((0,h.createElementVNode)("input",{style:{width:"100%"},ref:"col",type:"color","onUpdate:modelValue":t[0]||(t[0]=e=>a.val=e)},null,512),[[h.vModelText,a.val]])])}]]),ye={class:"image-container"},be={ref:"canva"},Ee={props:{modelValue:{type:Object,default:null},value:{type:Object},label:{type:String,default:""},tooltip:{type:String,default:""}},data:()=>({txtr:null}),methods:{onUpdate({result:e,file:t}){const l=new Blob([e],{type:t.type}),o=URL.createObjectURL(l);this.txtr=o;const n=(new THREE.TextureLoader).load(o,()=>{URL.revokeObjectURL(o)});this.$emit("update:modelValue",n.image),this.$app.storage.writeFile("texture.png",e)}},mounted(){try{const e=this.value.resource.image,t=this.$refs.canva;t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0)}catch(e){}}},Ve=(0,y.A)(Ee,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",ye,[(0,h.createCommentVNode)(' <FileSelect @update:modelValue="onUpdate" acceptedTypes="image/\\*" /> '),(0,h.createElementVNode)("canvas",be,null,512)])}]]),ke={class:"image-uploader"},Ne=["accept"],Be={name:"FileSelect",props:{buttonText:{type:String,default:"Select Image"},maxFileSize:{type:Number,default:5242880},acceptedTypes:{type:String,default:"image/*"}},methods:{triggerFileInput(){this.$refs.fileInput.click()},handleFileSelect(e){const t=e.target.files[0];if(!t)return;if(console.log(t),!t.type.match(this.acceptedTypes.replace("*",".*")))return void this.$emit("error","Invalid file type");if(t.size>this.maxFileSize)return void this.$emit("error",`File is too large (max ${this.maxFileSize/1024/1024}MB)`);const l=new FileReader;l.onload=e=>{this.$emit("update:modelValue",{result:e.target.result,file:t})},l.onerror=()=>this.$emit("error","Failed to read file"),l.readAsArrayBuffer(t),e.target.value=""}}},Se=(0,y.A)(Be,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",ke,[(0,h.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>a.triggerFileInput&&a.triggerFileInput(...e)),class:"upload-button"},(0,h.toDisplayString)(l.buttonText),1),(0,h.createElementVNode)("input",{type:"file",ref:"fileInput",accept:l.acceptedTypes,onChange:t[1]||(t[1]=(...e)=>a.handleFileSelect&&a.handleFileSelect(...e)),style:{display:"none"}},null,40,Ne)])}]]),De={__name:"twosidebool",props:{modelValue:{type:Boolean,default:!1},labels:{type:Array}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,o=t,n=()=>{o("update:modelValue",!l.modelValue)};return(t,l)=>((0,h.openBlock)(),(0,h.createElementBlock)("div",{class:"toggle-switch",onClick:n},[(0,h.createElementVNode)("div",{class:(0,h.normalizeClass)(["slider",{active:e.modelValue}])},[(0,h.createElementVNode)("span",{class:(0,h.normalizeClass)(["left-label",{active:!e.modelValue}])},[(0,h.renderSlot)(t.$slots,"left",{},()=>[(0,h.createTextVNode)((0,h.toDisplayString)(e.labels[0]),1)])],2),l[0]||(l[0]=(0,h.createElementVNode)("span",{class:"knob"},null,-1)),(0,h.createElementVNode)("span",{class:(0,h.normalizeClass)(["right-label",{active:e.modelValue}])},[(0,h.renderSlot)(t.$slots,"right",{},()=>[(0,h.createTextVNode)((0,h.toDisplayString)(e.labels[1]),1)])],2)],2)]))}},Ce=(0,y.A)(De,[["__scopeId","data-v-27cb6eff"]]),Ae={class:"text-align-editor"},xe=["value"],we={__name:"sectionselect",props:{modelValue:{type:String,default:"center"},list:{type:Array,default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,o=t,n=(0,h.ref)(l.modelValue);(0,h.watch)(()=>l.modelValue,e=>{e!==n.value&&(n.value=e)});const a=()=>o("update:modelValue",n.value);return(t,l)=>((0,h.openBlock)(),(0,h.createElementBlock)("div",Ae,[(0,h.withDirectives)((0,h.createElementVNode)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),onChange:a},[((0,h.openBlock)(!0),(0,h.createElementBlock)(h.Fragment,null,(0,h.renderList)(e.list,e=>((0,h.openBlock)(),(0,h.createElementBlock)("option",{value:e.value},(0,h.toDisplayString)(e.label||e.value),9,xe))),256))],544),[[h.vModelSelect,n.value]])]))}},Fe=(0,y.A)(we,[["__scopeId","data-v-57114c76"]]);var Ie=l(1720),$e=l(9912),Te=l(7872),Le=l(3733),Oe=l(2489);const Me={class:"textwrap w100 tcenter"},_e={class:"textwrap w100 tcenter"},je={key:0,style:{"min-width":"256px",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},Ue={tweens:"move-up"},Pe={name:"ActionsLib",props:{selected:{type:Object},regbusy:!1,register:{type:Array}},data:()=>({current:null}),computed:{actions(){return this.$app.actions}},emits:["selectItem"],methods:{onAssetEdit(e,t){this.current[e],this.current[e]=t},getTypeIcon:e=>Ue[e],checkType:e=>typeof e,select(e){this.current=e,this.$emit("selectItem",e)},endEdit(){this.$refs.assetEditor.end()}}},ze=(0,y.A)(Pe,[["render",function(e,t,l,o,n,a){const r=(0,h.resolveComponent)("spinner"),s=(0,h.resolveComponent)("queryform"),i=(0,h.resolveComponent)("Selectable"),d=(0,h.resolveDirective)("tooltip");return(0,h.openBlock)(),(0,h.createBlock)(h.Teleport,{to:".modal-content"},[(0,h.createVNode)(i,{onSelectItem:a.select,list:a.actions.library,selected:l.selected},(0,h.createSlots)({item:(0,h.withCtx)(({item:e})=>[(0,h.withDirectives)(((0,h.openBlock)(),(0,h.createElementBlock)("div",Me,[(0,h.createTextVNode)((0,h.toDisplayString)(e.component),1)])),[[d,e.component]]),(0,h.withDirectives)(((0,h.openBlock)(),(0,h.createElementBlock)("div",_e,[(0,h.createTextVNode)((0,h.toDisplayString)(e.type),1)])),[[d,e.type]])]),_:2},[l.register?{name:"selected",fn:(0,h.withCtx)(({item:e})=>[l.regbusy?((0,h.openBlock)(),(0,h.createElementBlock)("div",je,[(0,h.createVNode)(r)])):((0,h.openBlock)(),(0,h.createBlock)(s,{key:1,values:l.register},null,8,["values"]))]),key:"0"}:void 0]),1032,["onSelectItem","list","selected"])])}]]),Ke={class:"itemElement"},Re={class:"itemrow"},qe={props:{item:{type:Object}}},We=(0,y.A)(qe,[["render",function(e,t,l,o,n,a){return(0,h.openBlock)(),(0,h.createElementBlock)("div",Ke,[(0,h.createElementVNode)("div",Re,(0,h.toDisplayString)(l.item.name),1)])}]]);var Ge=l(5509),He=l(826),Xe=l(1302),Ye=l(6416),Qe=l(8179),Je=l(9404),Ze=l(1431)}}]);