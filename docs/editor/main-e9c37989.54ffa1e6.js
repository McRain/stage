"use strict";(self.webpackChunk_reneos_3d_editor=self.webpackChunk_reneos_3d_editor||[]).push([[140],{4546:(e,t,l)=>{l.d(t,{A:()=>b});var a=l(5421);const n=["draggable","droppable"],o={class:"roottree"},r=["draggable"],s={class:"tree-node-content"},i={class:"selector"},d=["checked"],c={key:0,class:"prepender"},u=["title"],p={key:1,class:"appender"},m={key:0,class:"children"},h={key:1};function v(e,t){for(let l=0;l<e.length;l++)e[l].isSelected=t,e[l].children&&v(e[l].children,t)}const g={name:"TreeNode",props:{node:{type:Object,required:!0},selector:{type:Boolean,default:!0},index:{type:Number},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"childrens"},filter:{type:Function},draggable:{type:Boolean,default:!0},droppable:{type:Boolean,default:!0}},computed:{list(){return this.filter?this.filter(this.node[this.childsFiled]):this.node[this.childsFiled]}},data:()=>({expanded:{},childloaded:{},isLoading:!1,selectChangeEvent:(0,a.inject)("selectChangeEvent",null),clickNodeEvent:(0,a.inject)("clickNodeEvent",null),dropNodeEvent:(0,a.inject)("nodeDropEvent",null),isDragOver:!1}),methods:{onDragStart(e){this.$app.app.draggedNode=this.node,e.dataTransfer.effectAllowed="copy"},onDragOver(e){e.dataTransfer.dropEffect="copy",this.isDragOver=!0},onDragEnter(e){this.isDragOver=!0,!this.expanded[this.node.uid]&&this.node[this.childsFiled]?.length&&this.toggleExpand()},onDragLeave(){this.isDragOver=!1},onDrop(e){this.isDragOver=!1,this.dropNodeEvent({target:this.node,source:this.$app.app.draggedNode})},async toggleExpand(){this.node[this.childsFiled]&&0!==this.node[this.childsFiled].length&&(this.expanded[this.node.uid]=!this.expanded[this.node.uid],this.expanded[this.node.uid]&&!this.childloaded[this.node.uid]&&await this.loadChildren(),this.$emit("updateExpanded",this.node))},async loadChildren(){this.childloaded[this.node.uid]=!0},onChildSelectChange(e){},onCheckboxChange(e){e.isSelected=!e.isSelected,e[this.childsFiled]?.length&&v(e[this.childsFiled],e.isSelected),this.selectChangeEvent(this.node),this.$emit("changeSelection",this.node)},selectNode(e){this.clickNodeEvent(this.node)}}};var f=l(6262);const y={components:{TreeNode:(0,f.A)(g,[["render",function(e,t,l,n,o,v){const g=(0,a.resolveComponent)("TreeNode",!0);return(0,a.openBlock)(),(0,a.createElementBlock)("li",{class:(0,a.normalizeClass)(["tree-node",{"drag-over":o.isDragOver}]),draggable:l.draggable,onDragstart:t[3]||(t[3]=(0,a.withModifiers)(e=>l.draggable&&v.onDragStart(e),["stop"])),onDragover:t[4]||(t[4]=(0,a.withModifiers)((...e)=>v.onDragOver&&v.onDragOver(...e),["prevent"])),onDragenter:t[5]||(t[5]=(0,a.withModifiers)((...e)=>v.onDragEnter&&v.onDragEnter(...e),["prevent"])),onDragleave:t[6]||(t[6]=(...e)=>v.onDragLeave&&v.onDragLeave(...e)),onDrop:t[7]||(t[7]=(0,a.withModifiers)((...e)=>v.onDrop&&v.onDrop(...e),["prevent","stop"]))},[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("span",{class:"collapser",onClick:t[0]||(t[0]=(...e)=>v.toggleExpand&&v.toggleExpand(...e))},[v.list?.length?(0,a.renderSlot)(e.$slots,"icon",{key:0,node:l.node},()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.expanded[l.node.uid]?"▼":"▶"),1)],!0):(0,a.createCommentVNode)("v-if",!0)]),(0,a.createElementVNode)("span",i,[l.selector?(0,a.renderSlot)(e.$slots,"checkbox",{key:0},()=>[(0,a.createElementVNode)("input",{ref:"checkedInput",type:"checkbox",onChange:t[1]||(t[1]=e=>v.onCheckboxChange(l.node)),checked:l.node.isSelected},null,40,d)],!0):(0,a.createCommentVNode)("v-if",!0)]),e.$slots.prepend?((0,a.openBlock)(),(0,a.createElementBlock)("span",c,[(0,a.renderSlot)(e.$slots,"prepend",{node:l.node},void 0,!0)])):(0,a.createCommentVNode)("v-if",!0),(0,a.createElementVNode)("span",{class:"labeler",title:l.node.uid,onClick:t[2]||(t[2]=(...e)=>v.selectNode&&v.selectNode(...e))},[(0,a.renderSlot)(e.$slots,"label",{node:l.node},()=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(l.node.uid)+"|",1)],!0)],8,u),e.$slots.append?((0,a.openBlock)(),(0,a.createElementBlock)("span",p,[(0,a.renderSlot)(e.$slots,"append",{node:l.node,index:l.index},void 0,!0)])):(0,a.createCommentVNode)("v-if",!0)]),o.expanded[l.node.uid]&&Array.isArray(v.list)&&v.list.length?((0,a.openBlock)(),(0,a.createElementBlock)("ul",m,[o.childloaded[l.node.uid]?((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,{key:0},(0,a.renderList)(v.list,t=>((0,a.openBlock)(),(0,a.createBlock)(g,{draggable:l.draggable,onChangeSelection:v.onChildSelectChange,filter:l.filter,selector:l.selector,focused:t.focused,key:t.uid,node:t,childsFiled:l.childsFiled},(0,a.createSlots)({_:2},[(0,a.renderList)(e.$slots,(t,l)=>({name:l,fn:(0,a.withCtx)(t=>[(0,a.renderSlot)(e.$slots,l,(0,a.mergeProps)({ref_for:!0},t),void 0,!0)])}))]),1032,["draggable","onChangeSelection","filter","selector","focused","node","childsFiled"]))),128)):((0,a.openBlock)(),(0,a.createElementBlock)("div",h," load... "))])):(0,a.createCommentVNode)("v-if",!0)],42,r)}],["__scopeId","data-v-ec22d48c"]])},computed:{list(){return this.filter?this.filter(this.tree):this.tree}},data:()=>({expandeds:{},isDragOver:!1}),props:{tree:{type:Array,required:!0},selector:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},childsFiled:{type:String,default:"children"},filter:{type:Function},draggable:{type:Boolean,default:!1},droppable:{type:Boolean,default:!1}},setup(e,{slots:t,emit:l}){(0,a.provide)("clickNodeEvent",e=>{l("clickNode",e)}),(0,a.provide)("selectChangeEvent",e=>{l("changeSelect",e)}),(0,a.provide)("nodeDropEvent",e=>{l("node-drop",e)})},methods:{onDragOver(e){e.dataTransfer.dropEffect="copy",this.isDragOver=!0},onDragEnter(e){this.isDragOver=!0},onDragLeave(){this.isDragOver=!1},onDrop(e){this.isDragOver=!1,this.$app?.app?.draggedNode&&(console.log(this.$app?.app?.draggedNode),this.$emit("node-drop",{target:null,source:this.$app.app.draggedNode}))},onUpdateExpanded(e){},findNodeByUid(e,t){for(let l of e){if(l.uid===t)return l;if(l.children){let e=this.findNodeByUid(l.children,t);if(e)return e}}return null},removeNodeFromTree(e,t){for(let l=0;l<e.length;l++){if(e[l].uid===t)return e.splice(l,1),!0;if(e[l][this.childsFiled]&&this.removeNodeFromTree(e[l][this.childsFiled],t))return!0}return!1}}},b=(0,f.A)(y,[["render",function(e,t,l,r,s,i){const d=(0,a.resolveComponent)("TreeNode");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(["treecontainer",{"drag-over":s.isDragOver}]),draggable:l.draggable,droppable:l.droppable,onDrop:t[0]||(t[0]=(0,a.withModifiers)((...e)=>i.onDrop&&i.onDrop(...e),["prevent","stop"])),onDragover:t[1]||(t[1]=(0,a.withModifiers)((...e)=>i.onDragOver&&i.onDragOver(...e),["prevent"])),onDragenter:t[2]||(t[2]=(0,a.withModifiers)((...e)=>i.onDragEnter&&i.onDragEnter(...e),["prevent"])),onDragleave:t[3]||(t[3]=(...e)=>i.onDragLeave&&i.onDragLeave(...e))},[(0,a.createElementVNode)("ul",o,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.list,(t,n)=>((0,a.openBlock)(),(0,a.createBlock)(d,{key:t.uid,filter:l.filter,selector:l.selector,node:t,index:n,focused:l.focused,childsFiled:l.childsFiled,onUpdateExpanded:i.onUpdateExpanded,draggable:l.draggable,droppable:l.droppable},(0,a.createSlots)({_:2},[(0,a.renderList)(e.$slots,(t,l)=>({name:l,fn:(0,a.withCtx)(t=>[(0,a.renderSlot)(e.$slots,l,(0,a.mergeProps)({ref_for:!0},t),void 0,!0)])}))]),1032,["filter","selector","node","index","focused","childsFiled","onUpdateExpanded","draggable","droppable"]))),128))])],42,n)}],["__scopeId","data-v-48ce72d0"]])},6802:(e,t,l)=>{l.r(t),l.d(t,{ActionEdit:()=>Ze.A,ActionItem:()=>Qe,ActionsLib:()=>Ge,AudioControl:()=>ce,BoolEdit:()=>H.A,CustomInput:()=>y,DimensionsEdit:()=>je.A,EditColor:()=>ke,EulerBlock:()=>he.A,ExpandedButton:()=>a.A,ExtMenu:()=>p.A,FileSelect:()=>we,Float:()=>ae,FloatBlock:()=>ue.A,FontSize:()=>Pe.A,Icon:()=>n.A,ImageView:()=>De,Int:()=>J,ItemsLib:()=>Je.A,Label:()=>Oe.A,LabelEdit:()=>fe.A,LoginForm:()=>at.A,Modal:()=>o.A,PopupList:()=>r.A,ProjectItem:()=>et.A,QuaternionBlock:()=>ve.A,RadioButton:()=>D,SearchFilter:()=>F,SectionSelect:()=>Me,Selectable:()=>P,ShadowEdit:()=>_e.A,SimpleButton:()=>s.A,SlideBlock:()=>T.A,Spinner:()=>d.A,TextColorEdit:()=>Ue.A,TextEdit:()=>ge.A,Toast:()=>u.A,Toasts:()=>c.A,ToggleButton:()=>i.A,TransformEdit:()=>ye.A,TreeLi:()=>$.A,TwoSideBool:()=>Fe,UILabel:()=>nt.A,V3:()=>pe.A,V3block:()=>me.A,confirmform:()=>lt.A,params:()=>Z.A,queryform:()=>tt.A,vlist:()=>G});var a=l(823),n=l(6222),o=l(8287),r=l(3373),s=l(5499),i=l(2262),d=l(8663),c=l(7546),u=l(2859),p=l(1255),m=l(5421);const h={class:"input-wrapper"},v=["type","value","placeholder"],g={name:"MinimalInput",props:{type:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:String,default:""}},emits:["update:value"]};var f=l(6262);const y=(0,f.A)(g,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",h,[(0,m.createElementVNode)("input",{type:l.type,value:l.value,onInput:t[0]||(t[0]=t=>e.$emit("update:value",t.target.value)),placeholder:l.placeholder,class:"input-field"},null,40,v)])}],["__scopeId","data-v-f47b63dc"]]),b={class:"radio-group"},E={class:"radio-label"},V=["name","value","checked","disabled","onChange"],k={class:"radio-custom"},N={class:"radio-text"},S={class:"radio-default-label"},B={name:"RadioButton",props:{options:{type:[Array,Number],required:!0,validator:e=>Array.isArray(e)||"number"==typeof e&&e>0},modelValue:{type:[String,Number,Boolean,Object],default:null},name:{type:String,default:"radio-group"},disabled:{type:Boolean,default:!1},valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"}},emits:["update:modelValue","change"],computed:{normalizedOptions(){return"number"==typeof this.options?Array.from({length:this.options},(e,t)=>t+1):this.options}},methods:{getOptionValue(e){return"object"==typeof e&&null!==e&&(e[this.valueKey]||e.value)||e},getOptionLabel(e){return"object"==typeof e&&null!==e?e[this.labelKey]||e.label||this.getOptionValue(e):e},isChecked(e){return this.getOptionValue(e)===this.modelValue},handleChange(e){const t=this.getOptionValue(e);this.$emit("update:modelValue",t),this.$emit("change",t)}}},D=(0,f.A)(B,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",b,[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(l.options,(t,a)=>((0,m.openBlock)(),(0,m.createElementBlock)("div",{key:a,class:(0,m.normalizeClass)(["radio-item",{"radio-item--disabled":l.disabled}])},[(0,m.createElementVNode)("label",E,[(0,m.createElementVNode)("input",{type:"radio",name:l.name,value:o.getOptionValue(t),checked:o.isChecked(t),disabled:l.disabled,onChange:e=>o.handleChange(t),class:"radio-input"},null,40,V),(0,m.createCommentVNode)(" Кастомная кнопка через слот "),(0,m.createElementVNode)("span",k,[(0,m.renderSlot)(e.$slots,"button",{option:t,index:a,checked:o.isChecked(t)},()=>[(0,m.createElementVNode)("span",{class:(0,m.normalizeClass)(["radio-default-button",{"radio-default-button--checked":o.isChecked(t)}])},null,2)],!0)]),(0,m.createCommentVNode)(" Кастомная надпись через слот "),(0,m.createElementVNode)("span",N,[(0,m.renderSlot)(e.$slots,"label",{option:t,index:a,checked:o.isChecked(t)},()=>[(0,m.createElementVNode)("span",S,(0,m.toDisplayString)(o.getOptionLabel(t)),1)],!0)])])],2))),128))])}],["__scopeId","data-v-65d75466"]]),C={class:"search-filter"},A={class:"search-input-container"},x=["placeholder"],w=["disabled"],I={name:"SearchFilter",props:{value:{type:String,default:""},placeholder:{type:String,default:"Enter text to search..."},debounce:{type:Number,default:300},label:{type:String,default:""},button:{type:String,default:"Search"}},data(){return{searchValue:this.value,debounceTimer:null}},watch:{value(e){this.searchValue=e}},methods:{handleInput(){console.log("handleInput"),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.$emit("input",this.searchValue),this.$emit("change",this.searchValue)},this.debounce)},handleSearch(){this.searchValue.trim()&&(this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.$emit("search",this.searchValue))},beforeUnmount(){this.debounceTimer&&clearTimeout(this.debounceTimer)}}},F=(0,f.A)(I,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",C,[(0,m.createElementVNode)("div",A,[(0,m.createElementVNode)("div",null,(0,m.toDisplayString)(l.label),1),(0,m.withDirectives)((0,m.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchValue=e),type:"text",class:"search-input",placeholder:l.placeholder,onInput:t[1]||(t[1]=(0,m.withModifiers)((...e)=>o.handleInput&&o.handleInput(...e),["stop"])),onKeyup:t[2]||(t[2]=(0,m.withKeys)((...e)=>o.handleSearch&&o.handleSearch(...e),["enter"]))},null,40,x),[[m.vModelText,n.searchValue]]),(0,m.createElementVNode)("button",{class:"search-button",onClick:t[3]||(t[3]=(...e)=>o.handleSearch&&o.handleSearch(...e)),disabled:!n.searchValue.trim()},[(0,m.renderSlot)(e.$slots,"button-content",{},()=>[(0,m.createElementVNode)("span",null,(0,m.toDisplayString)(l.button),1)],!0)],8,w)])])}],["__scopeId","data-v-7caf0ae1"]]);var T=l(2300),$=l(5805);const L={class:"selectable-container"},M={class:"list"},O={class:"grid"},_=["onClick"],j={key:0,class:"info"},U={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},P=(0,f.A)(U,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",L,[(0,m.createElementVNode)("div",M,[(0,m.createElementVNode)("div",O,[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(l.list,(t,l)=>((0,m.openBlock)(),(0,m.createElementBlock)("div",{onClick:e=>o.onItemSelect(t),class:"grid-element",key:l},[(0,m.renderSlot)(e.$slots,"item",{item:t})],8,_))),128))])]),n.current?((0,m.openBlock)(),(0,m.createElementBlock)("div",j,[(0,m.renderSlot)(e.$slots,"selected",{item:n.current})])):(0,m.createCommentVNode)("v-if",!0)])}]]),K={class:"vlist-container"},z={class:"list"},R={class:"vlist"},q=["onClick"],W={name:"ActionsLib",data:()=>({current:null}),props:{list:{type:Array},selected:{type:Object}},watch:{selected(e,t){this.current=e}},emits:["selectItem"],methods:{onItemSelect(e){this.$emit("selectItem",e)}}},G=(0,f.A)(W,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",K,[(0,m.createElementVNode)("div",z,[(0,m.createElementVNode)("div",R,[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(l.list,(t,l)=>((0,m.openBlock)(),(0,m.createElementBlock)("div",{onClick:e=>o.onItemSelect(t),class:"vlist-element",key:l},[(0,m.renderSlot)(e.$slots,"item",{item:t})],8,q))),128))])])])}]]);var H=l(9482);const X={class:"comma-number-input-wrapper"},Y={class:"arrow-buttons"},Q={name:"input-float",props:{value:Object,modelValue:Number,step:{type:Number,default:1},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER}},data:()=>({interval:null,separator:",",isPressed:!1,changeSpeed:100}),computed:{formattedValue:{get(){return this.modelValue},set(e){console.log(e),this.parseNumber(e),this.$emit("update:modelValue",e)}}},mounted(){const e=(new Intl.NumberFormat).format(this.modelValue);this.separator=e.charAt(1),this.$refs.input.addEventListener("wheel",this.onWheel,{passive:!1})},beforeDestroy(){this.$refs.input.removeEventListener("wheel",this.onWheel)},methods:{onFocus(){this.$nextTick(()=>{this.$refs.input.select()})},parseNumber(e){try{const t=parseFloat(e.replace(",","."));return isNaN(t)?this.modelValue:t}catch(e){return this.modelValue}},formatNumber:e=>parseFloat(e).toFixed(0).replace(".",","),onInput(e){this.formattedValue=e.target.modelValue},onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement===this.$refs.input&&this.changeValue(e.deltaY>0?-this.step:this.step)},onKeyDown(e){"ArrowUp"===e.key?(this.changeValue(this.step),e.preventDefault()):"ArrowDown"===e.key&&(this.changeValue(-this.step),e.preventDefault())},changeValue(e){let t=(this.modelValue||0)+e;t=Math.max(Math.min(t,this.max),this.min),this.$emit("update:modelValue",parseFloat(t.toFixed(0)))},startIncrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(this.step),50))},400)},startDecrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(-this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(-this.step),50))},400)},stopChange(){this.isPressed=!1,clearInterval(this.interval)}}},J=(0,f.A)(Q,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",X,[(0,m.withDirectives)((0,m.createElementVNode)("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=e=>o.formattedValue=e),onKeydown:t[1]||(t[1]=(...e)=>o.onKeyDown&&o.onKeyDown(...e)),onDblclick:t[2]||(t[2]=(...e)=>o.onFocus&&o.onFocus(...e)),class:"comma-number-input"},null,544),[[m.vModelText,o.formattedValue,void 0,{number:!0}]]),(0,m.createElementVNode)("div",Y,[(0,m.createElementVNode)("button",{onMousedown:t[3]||(t[3]=(...e)=>o.startIncrement&&o.startIncrement(...e)),onMouseup:t[4]||(t[4]=(...e)=>o.stopChange&&o.stopChange(...e)),onMouseleave:t[5]||(t[5]=(...e)=>o.stopChange&&o.stopChange(...e))},"▲",32),(0,m.createElementVNode)("button",{onMousedown:t[6]||(t[6]=(...e)=>o.startDecrement&&o.startDecrement(...e)),onMouseup:t[7]||(t[7]=(...e)=>o.stopChange&&o.stopChange(...e)),onMouseleave:t[8]||(t[8]=(...e)=>o.stopChange&&o.stopChange(...e))},"▼",32)])])}]]);var Z=l(8549);const ee={class:"comma-number-input-wrapper"},te={class:"arrow-buttons"},le={name:"CommaNumberInput",props:{modelValue:Number,step:{type:Number,default:.1},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},decimals:{type:Number,default:2}},data:()=>({interval:null,separator:",",isPressed:!1,changeSpeed:100}),computed:{formattedValue:{get(){return this.modelValue},set(e){const t=this.parseNumber(e);this.$emit("update:modelValue",t)}}},mounted(){const e=(new Intl.NumberFormat).format(this.modelValue);this.separator=e.charAt(1),this.$refs.input.addEventListener("wheel",this.onWheel,{passive:!1})},beforeDestroy(){this.$refs.input.removeEventListener("wheel",this.onWheel)},methods:{onFocus(){this.$nextTick(()=>{this.$refs.input.select()})},parseNumber(e){try{const t=parseFloat(e.replace(",","."));return isNaN(t)?this.modelValue:t}catch(e){return this.modelValue}},formatNumber(e){return parseFloat(e).toFixed(this.decimals).replace(".",",")},onInput(e){this.formattedValue=e.target.modelValue},onWheel(e){e.preventDefault(),e.stopPropagation(),document.activeElement===this.$refs.input&&this.changeValue(e.deltaY>0?-this.step:this.step)},onKeyDown(e){"ArrowUp"===e.key?(this.changeValue(this.step),e.preventDefault()):"ArrowDown"===e.key&&(this.changeValue(-this.step),e.preventDefault())},changeValue(e){let t=(this.modelValue||0)+e;t=Math.max(Math.min(t,this.max),this.min),this.$emit("update:modelValue",parseFloat(t.toFixed(this.decimals)))},startIncrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(this.step),50))},400)},startDecrement(){this.interval&&clearInterval(this.interval),this.isPressed=!0,this.changeValue(-this.step),setTimeout(()=>{this.isPressed&&(this.interval=setInterval(()=>this.changeValue(-this.step),50))},400)},stopChange(){this.isPressed=!1,clearInterval(this.interval)}}},ae=(0,f.A)(le,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",ee,[(0,m.withDirectives)((0,m.createElementVNode)("input",{ref:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.formattedValue=e),onKeydown:t[1]||(t[1]=(...e)=>o.onKeyDown&&o.onKeyDown(...e)),onDblclick:t[2]||(t[2]=(...e)=>o.onFocus&&o.onFocus(...e)),class:"comma-number-input"},null,544),[[m.vModelText,o.formattedValue]]),(0,m.createElementVNode)("div",te,[(0,m.createElementVNode)("button",{onMousedown:t[3]||(t[3]=(...e)=>o.startIncrement&&o.startIncrement(...e)),onMouseup:t[4]||(t[4]=(...e)=>o.stopChange&&o.stopChange(...e)),onMouseleave:t[5]||(t[5]=(...e)=>o.stopChange&&o.stopChange(...e))},"▲",32),(0,m.createElementVNode)("button",{onMousedown:t[6]||(t[6]=(...e)=>o.startDecrement&&o.startDecrement(...e)),onMouseup:t[7]||(t[7]=(...e)=>o.stopChange&&o.stopChange(...e)),onMouseleave:t[8]||(t[8]=(...e)=>o.stopChange&&o.stopChange(...e))},"▼",32)])])}]]),ne={class:"control-container"},oe=["max"],re={class:"buttons"},se=["disabled"],ie=["disabled"],de={__name:"playcontrol",props:{modelValue:{type:Object},selected:{type:Object},value:{type:Object},target:{type:Object},property:{type:Object}},setup(e){const t=e,l=(0,m.ref)(!1),a=(0,m.ref)(0),n=(0,m.ref)(0),o=(0,m.ref)(0),r=(0,m.ref)(!1),s=(0,m.ref)(!1);function i(){const e=t.modelValue;s.value?e.pause():e.play()}function d(){t.modelValue.pause(),t.modelValue.currentTime=0}function c(){r.value=!1;const e=t.modelValue;if(l.value&&o.value<=e.duration)if(e.readyState<2){const t=()=>{e.currentTime=o.value,e.removeEventListener("canplay",t)};e.addEventListener("canplay",t),e.load()}else e.currentTime=o.value}function u(e){return!e||isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}return(0,m.onMounted)(()=>{const e=t.modelValue,i=()=>{e.readyState>=1&&(a.value=e.duration,l.value=!0)},d=()=>{r.value||(n.value=e.currentTime,o.value=e.currentTime)},c=()=>s.value=!0,u=()=>s.value=!1,p=()=>s.value=!1;e.addEventListener("loadedmetadata",i),e.addEventListener("canplay",i),e.addEventListener("timeupdate",d),e.addEventListener("play",c),e.addEventListener("playing",c),e.addEventListener("pause",u),e.addEventListener("ended",p),i(),(0,m.onUnmounted)(()=>{e.removeEventListener("loadedmetadata",i),e.removeEventListener("canplay",i),e.removeEventListener("timeupdate",d),e.removeEventListener("play",c),e.removeEventListener("playing",c),e.removeEventListener("pause",u),e.removeEventListener("ended",p)})}),(e,t)=>{const p=(0,m.resolveComponent)("icon");return(0,m.openBlock)(),(0,m.createElementBlock)("div",ne,[(0,m.createElementVNode)("span",null,(0,m.toDisplayString)(u(n.value))+" / "+(0,m.toDisplayString)(u(a.value)),1),(0,m.withDirectives)((0,m.createElementVNode)("input",{type:"range",min:"0",max:a.value,step:"0.01","onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),onMousedown:t[1]||(t[1]=e=>r.value=!0),onMouseup:c,onTouchstart:t[2]||(t[2]=e=>r.value=!0),onTouchend:c},null,40,oe),[[m.vModelText,o.value,void 0,{number:!0}]]),(0,m.createElementVNode)("div",re,[(0,m.createElementVNode)("button",{class:"btn square",onClick:i,disabled:!l.value},[(0,m.createVNode)(p,{value:s.value?"pause2":"play3"},null,8,["value"])],8,se),(0,m.createCommentVNode)(' <button class="btn square" @click="pause" :disabled="!ready">\r\n                <icon value="pause2"></icon>\r\n            </button> '),(0,m.createElementVNode)("button",{class:"btn square",onClick:d,disabled:!l.value},[(0,m.createVNode)(p,{value:"stop2"})],8,ie)])])}}},ce=(0,f.A)(de,[["__scopeId","data-v-ae734b3c"]]);var ue=l(8992),pe=l(4910),me=l(8193),he=l(8493),ve=l(2578),ge=l(4831),fe=l(320),ye=l(7520);const be={style:{display:"grid","grid-template-columns":"96px 1fr"}};var Ee=l(9783);const Ve={name:"EditColor",props:{modelValue:{type:Object}},computed:{val:{get(){return`#${this.modelValue?.getHexString()||"ffffff"}`},set(e){this.modelValue&&this.modelValue.set(e),this.$emit("update:modelValue",this.modelValue||new Ee.Color(e))}}}},ke=(0,f.A)(Ve,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",be,[(0,m.withDirectives)((0,m.createElementVNode)("input",{style:{width:"100%"},ref:"col",type:"color","onUpdate:modelValue":t[0]||(t[0]=e=>o.val=e)},null,512),[[m.vModelText,o.val]])])}]]),Ne={class:"image-container"},Se={ref:"canva"},Be={props:{modelValue:{type:Object,default:null},value:{type:Object},label:{type:String,default:""},tooltip:{type:String,default:""}},data:()=>({txtr:null}),methods:{onUpdate({result:e,file:t}){const l=new Blob([e],{type:t.type}),a=URL.createObjectURL(l);this.txtr=a;const n=(new THREE.TextureLoader).load(a,()=>{URL.revokeObjectURL(a)});this.$emit("update:modelValue",n.image),this.$app.storage.writeFile("texture.png",e)}},mounted(){try{const e=this.value.resource.image,t=this.$refs.canva;t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0)}catch(e){}}},De=(0,f.A)(Be,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",Ne,[(0,m.createCommentVNode)(' <FileSelect @update:modelValue="onUpdate" acceptedTypes="image/\\*" /> '),(0,m.createElementVNode)("canvas",Se,null,512)])}]]),Ce={class:"image-uploader"},Ae=["accept"],xe={name:"FileSelect",props:{buttonText:{type:String,default:"Select Image"},maxFileSize:{type:Number,default:5242880},acceptedTypes:{type:String,default:"image/*"}},methods:{triggerFileInput(){this.$refs.fileInput.click()},handleFileSelect(e){const t=e.target.files[0];if(!t)return;if(console.log(t),!t.type.match(this.acceptedTypes.replace("*",".*")))return void this.$emit("error","Invalid file type");if(t.size>this.maxFileSize)return void this.$emit("error",`File is too large (max ${this.maxFileSize/1024/1024}MB)`);const l=new FileReader;l.onload=e=>{this.$emit("update:modelValue",{result:e.target.result,file:t})},l.onerror=()=>this.$emit("error","Failed to read file"),l.readAsArrayBuffer(t),e.target.value=""}}},we=(0,f.A)(xe,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",Ce,[(0,m.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>o.triggerFileInput&&o.triggerFileInput(...e)),class:"upload-button"},(0,m.toDisplayString)(l.buttonText),1),(0,m.createElementVNode)("input",{type:"file",ref:"fileInput",accept:l.acceptedTypes,onChange:t[1]||(t[1]=(...e)=>o.handleFileSelect&&o.handleFileSelect(...e)),style:{display:"none"}},null,40,Ae)])}]]),Ie={__name:"twosidebool",props:{modelValue:{type:Boolean,default:!1},labels:{type:Array}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,a=t,n=()=>{a("update:modelValue",!l.modelValue)};return(t,l)=>((0,m.openBlock)(),(0,m.createElementBlock)("div",{class:"toggle-switch",onClick:n},[(0,m.createElementVNode)("div",{class:(0,m.normalizeClass)(["slider",{active:e.modelValue}])},[(0,m.createElementVNode)("span",{class:(0,m.normalizeClass)(["left-label",{active:!e.modelValue}])},[(0,m.renderSlot)(t.$slots,"left",{},()=>[(0,m.createTextVNode)((0,m.toDisplayString)(e.labels[0]),1)])],2),l[0]||(l[0]=(0,m.createElementVNode)("span",{class:"knob"},null,-1)),(0,m.createElementVNode)("span",{class:(0,m.normalizeClass)(["right-label",{active:e.modelValue}])},[(0,m.renderSlot)(t.$slots,"right",{},()=>[(0,m.createTextVNode)((0,m.toDisplayString)(e.labels[1]),1)])],2)],2)]))}},Fe=(0,f.A)(Ie,[["__scopeId","data-v-27cb6eff"]]),Te={class:"text-align-editor"},$e=["value"],Le={__name:"sectionselect",props:{modelValue:{type:String,default:"center"},list:{type:Array,default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,a=t,n=(0,m.ref)(l.modelValue);(0,m.watch)(()=>l.modelValue,e=>{e!==n.value&&(n.value=e)});const o=()=>a("update:modelValue",n.value);return(t,l)=>((0,m.openBlock)(),(0,m.createElementBlock)("div",Te,[(0,m.withDirectives)((0,m.createElementVNode)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),onChange:o},[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)(e.list,e=>((0,m.openBlock)(),(0,m.createElementBlock)("option",{value:e.value},(0,m.toDisplayString)(e.label||e.value),9,$e))),256))],544),[[m.vModelSelect,n.value]])]))}},Me=(0,f.A)(Le,[["__scopeId","data-v-57114c76"]]);var Oe=l(1720),_e=l(9912),je=l(7872),Ue=l(3733),Pe=l(2489);const Ke={class:"textwrap w100 tcenter"},ze={class:"textwrap w100 tcenter"},Re={key:0,style:{"min-width":"256px",height:"100%",display:"flex","justify-content":"center","align-items":"center"}},qe={tweens:"move-up"},We={name:"ActionsLib",props:{selected:{type:Object},regbusy:!1,register:{type:Array}},data:()=>({current:null}),computed:{actions(){return this.$app.actions}},emits:["selectItem"],methods:{onAssetEdit(e,t){this.current[e],this.current[e]=t},getTypeIcon:e=>qe[e],checkType:e=>typeof e,select(e){this.current=e,this.$emit("selectItem",e)},endEdit(){this.$refs.assetEditor.end()}}},Ge=(0,f.A)(We,[["render",function(e,t,l,a,n,o){const r=(0,m.resolveComponent)("spinner"),s=(0,m.resolveComponent)("queryform"),i=(0,m.resolveComponent)("Selectable"),d=(0,m.resolveDirective)("tooltip");return(0,m.openBlock)(),(0,m.createBlock)(m.Teleport,{to:".modal-content"},[(0,m.createVNode)(i,{onSelectItem:o.select,list:o.actions.library,selected:l.selected},(0,m.createSlots)({item:(0,m.withCtx)(({item:e})=>[(0,m.withDirectives)(((0,m.openBlock)(),(0,m.createElementBlock)("div",Ke,[(0,m.createTextVNode)((0,m.toDisplayString)(e.component),1)])),[[d,e.component]]),(0,m.withDirectives)(((0,m.openBlock)(),(0,m.createElementBlock)("div",ze,[(0,m.createTextVNode)((0,m.toDisplayString)(e.type),1)])),[[d,e.type]])]),_:2},[l.register?{name:"selected",fn:(0,m.withCtx)(({item:e})=>[l.regbusy?((0,m.openBlock)(),(0,m.createElementBlock)("div",Re,[(0,m.createVNode)(r)])):((0,m.openBlock)(),(0,m.createBlock)(s,{key:1,values:l.register},null,8,["values"]))]),key:"0"}:void 0]),1032,["onSelectItem","list","selected"])])}]]),He={class:"itemElement"},Xe={class:"itemrow"},Ye={props:{item:{type:Object}}},Qe=(0,f.A)(Ye,[["render",function(e,t,l,a,n,o){return(0,m.openBlock)(),(0,m.createElementBlock)("div",He,[(0,m.createElementVNode)("div",Xe,(0,m.toDisplayString)(l.item.name),1)])}]]);var Je=l(7187),Ze=l(1849),et=l(1302),tt=l(6416),lt=l(8179),at=l(9404),nt=l(1431)}}]);