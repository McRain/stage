"use strict";(self.webpackChunk_reneos_3d_mod_tweens=self.webpackChunk_reneos_3d_mod_tweens||[]).push([[84,234],{38:(e,t,a)=>{a.d(t,{A:()=>O});var o=a(27);const l={class:"flex-line"},i={class:"line-title"},n={class:"value-title"},s={value:"accurate"},r={value:"relative"},c={class:"flex-fit"},p={class:"flex-line"},d={class:"line-title"},m={class:"value-title"},u={value:"accurate"},y={value:"relative"},h={class:"flex-fit"},v={class:"flex-line"},f={class:"line-title"},g={class:"value-title"},V={class:"flex-line"},N={class:"line-title"},E={class:"value-title"},k={class:"flex-line"},b={class:"line-title"},w={class:"value-title"},x=["value"],$={class:"flex-line"},S={class:"line-title"},C={class:"value-title"},I=["checked"],R={class:"flex-line"},B={class:"flex-line"},z={class:"line-title"},A={class:"value-title"},T=["checked"];var U=a(876),D=a(40);const M={name:"TweenUI",props:{labels:{type:Object},property:{type:String},name:{type:String},from:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},to:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},delay:{type:Number},time:{type:Number},easing:{type:String,default:"Linear.InOut"},repeat:{type:Number},yoyo:{type:Boolean},options:{type:Object,default:{inspector:!1}},nowait:{type:Boolean}},computed:{fromtype:{get(){return this.from.type},set(e){this.$emit("update","from",{value:this.fromvalue,type:e})}},fromvalue:{get(){return this.from.value},set(e){this.$emit("update","from",{value:e,type:this.fromtype})}},totype:{get(){return this.to.type},set(e){this.$emit("update","to",{...this.to,type:e})}},tovalue:{get(){return this.to.value},set(e){this.$emit("update","to",{value:e,type:this.totype})}},easingval:{get(){return this.easing},set(e){this.$emit("update","easing",e)}},target(){return this.$app.selection.selected}},methods:{copyFromModel(e){const t=this.target.model[this.property].clone(),a=this[e];a.value.x=t.x,a.value.y=t.y,a.value.z=t.z,this.$emit("update",e,a)},reset(){const e=this.target[this.property]||this.target.model[this.property];this.target.model?this.target.model[this.property].copy(e):this.target[this.property].copy(e)},async play(){if(this.played)return this.played=!1,void this.$emit("play",this.played);this.played=!0,this.$emit("play",this.played),this.reset(),await TweenPos({from:this.from,to:this.to,delay:this.delay,time:this.time,easing:this.easing,repeat:this.repeat,yoyo:this.yoyo},this.target,!1),this.played=!1,this.$emit("play",this.played)}},data:()=>({easingList:[]}),components:{RepeatSelector:U.A},mounted(){Object.keys(D.GS).forEach(e=>{let t=e;Object.keys(D.GS[e]).forEach(e=>{this.easingList.push(`${t}.${e}`)})})}},O=(0,a(262).A)(M,[["render",function(e,t,a,U,D,M){const O=(0,o.resolveComponent)("icon"),j=(0,o.resolveComponent)("V3"),F=(0,o.resolveComponent)("Float"),_=(0,o.resolveComponent)("RepeatSelector");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[t[12]||(t[12]=(0,o.createTextVNode)("Из: ")),a.options.inspector&&["accurate"].includes(a.from.type)?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>M.copyFromModel("from"))},[(0,o.createVNode)(O,{value:"target",size:"0.9em"})])):(0,o.createCommentVNode)("v-if",!0)]),(0,o.createElementVNode)("div",n,[(0,o.withDirectives)((0,o.createElementVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>M.fromtype=e)},[(0,o.createElementVNode)("option",s,(0,o.toDisplayString)(a.labels.accurate),1),(0,o.createElementVNode)("option",r,(0,o.toDisplayString)(a.labels.relative),1)],512),[[o.vModelSelect,M.fromtype]])])]),(0,o.createElementVNode)("div",c,[["accurate","relative"].includes(a.from.type)?((0,o.openBlock)(),(0,o.createBlock)(j,{key:0,"onUpdate:modelValue":t[2]||(t[2]=e=>M.fromvalue=e),step:.1,modelValue:M.fromvalue},null,8,["modelValue"])):(0,o.createCommentVNode)("v-if",!0)]),(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",d,[t[13]||(t[13]=(0,o.createTextVNode)("В:")),a.options.inspector&&["accurate"].includes(a.to.type)?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,onClick:t[3]||(t[3]=e=>M.copyFromModel("to"))},[(0,o.createVNode)(O,{value:"target",size:"0.9em"})])):(0,o.createCommentVNode)("v-if",!0)]),(0,o.createElementVNode)("div",m,[(0,o.withDirectives)((0,o.createElementVNode)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>M.totype=e)},[(0,o.createElementVNode)("option",u,(0,o.toDisplayString)(a.labels.accurate),1),(0,o.createElementVNode)("option",y,(0,o.toDisplayString)(a.labels.relative),1)],512),[[o.vModelSelect,M.totype]])])]),(0,o.createElementVNode)("div",h,[["accurate","relative"].includes(a.to.type)?((0,o.openBlock)(),(0,o.createBlock)(j,{key:0,"onUpdate:modelValue":t[5]||(t[5]=e=>M.tovalue=e),step:.1,modelValue:M.tovalue},null,8,["modelValue"])):(0,o.createCommentVNode)("v-if",!0)]),(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("div",f,(0,o.toDisplayString)(a.labels.delay)+": ",1),(0,o.createElementVNode)("div",g,[(0,o.createVNode)(F,{modelValue:a.delay,min:0,decimals:0,step:10,"onUpdate:modelValue":t[6]||(t[6]=t=>e.$emit("update","delay",t))},null,8,["modelValue"])])]),(0,o.createElementVNode)("div",V,[(0,o.createElementVNode)("div",N,(0,o.toDisplayString)(a.labels.time)+": ",1),(0,o.createElementVNode)("div",E,[(0,o.createVNode)(F,{modelValue:a.time,min:0,decimals:0,step:10,"onUpdate:modelValue":t[7]||(t[7]=t=>e.$emit("update","time",t))},null,8,["modelValue"])])]),(0,o.createElementVNode)("div",k,[(0,o.createElementVNode)("div",b,(0,o.toDisplayString)(a.labels.easing)+":",1),(0,o.createElementVNode)("div",w,[(0,o.withDirectives)((0,o.createElementVNode)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>M.easingval=e)},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(D.easingList,e=>((0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e},(0,o.toDisplayString)(e),9,x))),256))],512),[[o.vModelSelect,M.easingval]])])]),(0,o.createElementVNode)("div",$,[(0,o.createElementVNode)("div",S,(0,o.toDisplayString)(a.labels.yoyo)+":",1),(0,o.createElementVNode)("div",C,[(0,o.createElementVNode)("input",{checked:a.yoyo,onChange:t[9]||(t[9]=t=>e.$emit("update","yoyo",t.target.checked)),type:"checkbox"},null,40,I)])]),(0,o.createElementVNode)("div",R,[(0,o.createElementVNode)("div",null,(0,o.toDisplayString)(a.labels.repeat)+":",1),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(_,{repeat:a.repeat,"onUpdate:repeat":t[10]||(t[10]=t=>e.$emit("update","repeat",t))},null,8,["repeat"])])]),(0,o.createElementVNode)("div",B,[(0,o.createElementVNode)("div",z,(0,o.toDisplayString)(a.labels.nowait)+":",1),(0,o.createElementVNode)("div",A,[(0,o.createElementVNode)("input",{checked:a.nowait,onChange:t[11]||(t[11]=t=>e.$emit("update","nowait",t.target.checked)),type:"checkbox"},null,40,T)])])])}]])},70:(e,t,a)=>{a.d(t,{A:()=>n});const o=new(a(40).YJ);let l=!1;class i{static get Group(){return o}static Add(e){o.add(e),l||(l=!0,i.Update())}static Remove(e){o.remove(e),0===o.getAll().length&&(l=!1)}static Update(e){l&&(o.update(e),requestAnimationFrame(i.Update))}static ToDegrees(e){return 180*e/Math.PI}static ToRadians(e){return e*Math.PI/180}static ToRadiansV3(e){return{x:e.x*Math.PI/180,y:e.y*Math.PI/180,z:e.z*Math.PI/180}}}const n=i},213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var o=a(27);const l={class:"vertflex"},i={class:"flex-fit",style:{"justify-content":"center"}},n={key:0,class:"flex-fit",style:{"justify-content":"center"}};var s=a(470),r=a(38);const c={name:"TweenRotate",props:{name:{type:String},from:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},to:{type:Object,default:{type:"accurate",value:{x:0,y:0,z:0}}},delay:{type:Number},time:{type:Number},easing:{type:String,default:"Easing.Linear.InOut"},repeat:{type:Number,default:1/0},yoyo:{type:Boolean},options:{type:Object,default:{inspector:!1}}},data:()=>({labels:{accurate:"Точное вращение",relative:"Относительное вращение",delay:"Отсрочка (мсек)",time:"Время (мсек)",easing:"Затухание",yoyo:"Замыкание",repeat:"Повторы",nowait:"Без ожидания"},played:!1}),computed:{fromtype:{get(){return this.from.type},set(e){this.$emit("update","from",{value:this.fromvalue,type:e})}},fromvalue:{get(){return this.from.value},set(e){this.$emit("update","from",{value:e,type:this.fromtype})}},totype:{get(){return this.to.type},set(e){this.$emit("update","to.type",e)}},tovalue:{get(){return this.to.value},set(e){this.$emit("update","to",{value:e,type:this.totype})}},easingval:{get(){return this.easing},set(e){this.$emit("update","easing",e)}},target(){return this.$app.selection.selected}},methods:{onUpdate(e,t){this.$emit("update",e,t)},copyFromModel(e){const t=this.target.model.rotation.clone();e.value.x=t.x,e.value.y=t.y,e.value.z=t.z},reset(){const e=this.target.rotation||this.target.model.rotation;this.target.model?this.target.model.rotation.copy(e,"XYZ"):this.target.rotation.copy(e,"XYZ")},async play(){if(this.played)return this.played=!1,void this.$emit("play",this.played);this.played=!0,this.$emit("play",this.played),this.reset(),await(0,s.default)({from:this.from,to:this.to,delay:this.delay,time:this.time,easing:this.easing,repeat:this.repeat,yoyo:this.yoyo},this.target,!1),this.played=!1,this.$emit("play",this.played)}},components:{TweenUI:r.A}},p=(0,a(262).A)(c,[["render",function(e,t,a,s,r,c){const p=(0,o.resolveComponent)("TweenUI"),d=(0,o.resolveComponent)("icon");return(0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.renderSlot)(e.$slots,"default")]),(0,o.createVNode)(p,{labels:r.labels,property:"rotation",name:a.name,from:a.from,to:a.to,delay:a.delay,time:a.time,easing:a.easing,repeat:a.repeat,yoyo:a.yoyo,options:a.options,onUpdate:c.onUpdate},null,8,["labels","name","from","to","delay","time","easing","repeat","yoyo","options","onUpdate"]),a.options.inspector?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createElementVNode)("button",{class:"square",onClick:t[0]||(t[0]=t=>e.$emit("play"))},[(0,o.createVNode)(d,{value:r.played?"stop2":"play3",size:"1.2em"},null,8,["value"])]),(0,o.createElementVNode)("button",{onClick:t[1]||(t[1]=t=>e.$emit("reset"))},[(0,o.createVNode)(d,{value:"undo",size:"1em"})]),(0,o.createElementVNode)("button",{onClick:t[2]||(t[2]=t=>e.$emit("remove"))},[(0,o.createVNode)(d,{value:"bin",size:"1em"})])])):(0,o.createCommentVNode)("v-if",!0)])}]])},262:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,o]of t)a[e]=o;return a}},470:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var o=a(40),l=a(70),i=a(500);const n=[];function s(e,t,a){const o="accurate"===t?l.A.ToRadiansV3({...e}):{x:(a?.x||0)+l.A.ToRadians(e?.x||0),y:(a?.y||0)+l.A.ToRadians(e?.y||0),z:(a?.z||0)+l.A.ToRadians(e?.z||0)};return new i.Euler(o.x,o.y,o.z,"XYZ")}function r(e,t,a=!1){return t.tweenRotation&&(console.log(`RotationTween ${t.tweenRotation.isPlaying()}`),t.tweenRotation.stop(),l.A.Remove(t.tweenRotation),console.log(`RotationTween ${t.tweenRotation.isPlaying()}`),t.tweenRotation=null),new Promise(r=>{console.log("TweenRotate");let c=t.model,p=e.rotation||t.rotation||c.rotation;const d=s(e.from.value,e.from.type,c.rotation),m=s(e.to?.value||{},e.from.type,p),u=(new i.Quaternion).setFromEuler(d),y=e.easing.split(".");let h=o.GS;for(let e=0;e<y.length;e++)h=h[y[e]];c.quaternion.copy(u),c.visible=!0;const v=new i.Vector3(d.x,d.y,d.z),f=new i.Vector3(m.x,m.y,m.z);"TweenRotate1751041132910"===e.uid&&console.log("TweenRotate1751041132910");const g=t.tweenRotation=new o.K(v).to(f,a?0:e.time||1e3).delay(a?0:e.delay||0).easing(h).yoyo(Boolean(e.yoyo)).repeat(Number.isInteger(e.repeat)?e.repeat:1/0).onStart(()=>{console.log(`TweenRotate ${e.name} On Start`),e.nowait&&r()}).onUpdate(()=>{d.setFromVector3(v),c.quaternion.setFromEuler(d)}).onComplete(()=>{l.A.Remove(g),r&&r()}).onEveryStart(()=>{}).onRepeat(()=>{r&&r()}).onStop(()=>{console.log("Stop"),l.A.Remove(g),r&&r()});g.start(),n.push(g),l.A.Add(g)})}},876:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(27);const l={style:{display:"flex","flex-wrap":"nowrap",gap:"10px","justify-content":"flex-end","align-items":"center"}},i={style:{display:"flex","align-items":"center",gap:"5px"}},n={props:{repeat:{type:[Number,String],default:0}},data(){return{numericValue:"number"==typeof this.repeat&&isFinite(this.repeat)?this.repeat:0,isInfinite:this.repeat===1/0||"Infinity"===this.repeat}},watch:{repeat(e){e===1/0||"Infinity"===e?this.isInfinite=!0:(this.isInfinite=!1,this.numericValue=e)}},methods:{handleNumericInput(){this.numericValue<0&&(this.numericValue=0),this.$emit("update:repeat",this.numericValue)},handleInfinityChange(){this.isInfinite?this.$emit("update:repeat",1/0):this.$emit("update:repeat",this.numericValue>=0?this.numericValue:0)}}},s=(0,a(262).A)(n,[["render",function(e,t,a,n,s,r){const c=(0,o.resolveComponent)("icon");return(0,o.openBlock)(),(0,o.createElementBlock)("div",l,[s.isInfinite?(0,o.createCommentVNode)("v-if",!0):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:0,style:{width:"42px",height:"0.98em"},type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>s.numericValue=e),min:"0",onInput:t[1]||(t[1]=(...e)=>r.handleNumericInput&&r.handleNumericInput(...e))},null,544)),[[o.vModelText,s.numericValue,void 0,{number:!0}]]),(0,o.createElementVNode)("div",i,[(0,o.createVNode)(c,{style:(0,o.normalizeStyle)({opacity:s.isInfinite?1:.5}),value:"infinite",size:"1em"},null,8,["style"]),(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.isInfinite=e),type:"checkbox",onChange:t[3]||(t[3]=(...e)=>r.handleInfinityChange&&r.handleInfinityChange(...e))},null,544),[[o.vModelCheckbox,s.isInfinite]])])])}]])}}]);