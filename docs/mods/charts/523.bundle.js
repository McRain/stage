"use strict";(self.webpackChunk_reneos_slider_mods_charts=self.webpackChunk_reneos_slider_mods_charts||[]).push([[523],{493:(t,e,s)=>{var o=s(333),a=s(66),n=s(186),i=s(998),r=s(420);console.log(i);const l=[2,3,5,6,8,9,10,11,18,19,21,22],u=[new n.Color(16711680),new n.Color(16744192),new n.Color(16776960),new n.Color(65280),new n.Color(255),new n.Color(4915330),new n.Color(9109759)];function c(t,e,s){for(let o=0;o<e.length;o++)t.array[3*e[o]+1]=s;t.needsUpdate=!0}function h(){return class extends n.Object3D{constructor(t){super(),this.type="ColumnChart",this.data={values:[],material:{},...t},this._max=this.data.max||25,this.tweengroup={},this.faces=[],this.columns=[],this.material=new n.MeshBasicMaterial({vertexColors:!0,transparent:!0,opacity:.9,reflectivity:.9}),this.vertices=new Float32Array([-1,-1,1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,-1,-1,-1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,1,-1,1,1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1]),this.cubeSize=2,this.targetSize=5,this.view=!1,t.transform?.position&&this.position.copy(templates[t.transform.position]||t.transform.position),t.transform?.scale&&this.scale.copy(templates[t.transform.scale]||t.transform.scale)}get max(){return this._max}set max(t){this._max=t,this.columns.forEach(t=>{c(t.cube.geometry.attributes.position,l,t.value/this._max*10)})}getTypes(){return[...super.getTypes(),this.type]}get values(){return this.data.values}set values(t){console.log(t),this.data.values=t,this.clean();for(let t=0;t<this.data.values.length;t++){const e=this.data.values[t];e.color=new n.Color(e.color);const s=this.createCubeGeometry(e.color),o=new n.Mesh(s,this.material);this.add(o);const a={cube:o,value:e.value};this.columns.push(a),o.position.x=t*this.cubeSize,this.play(o,e.value,"",t)}}reset(){this.columns.map(t=>{c(t.cube.geometry.attributes.position,l,-1)})}clean(){for(;this.children.length>0;)this.remove(this.children[0]);this.columns.length=0}init(){this.clean();let t=0;for(let e=0;e<this.data.values.length;e++){const s=this.data.values[e];s.color||(s.color=u[t++]),t>u.length-1&&(t=0);const o=this.createCubeGeometry(s.color),a=new n.Mesh(o,material);this.add(a),this.columns.push({cube:a,value:s.value});for(let t=0;t<this.columns.length;t++)this.columns[t].cube.position.x=t*this.cubeSize}const e=-this.data.values.length/2*this.cubeSize*this.scale.x;this.position.x=e,this.start()}addValue(){const t={value:0,color:new n.Color("white")};this.data.values.push(t);const e=this.createCubeGeometry(t.color),s=new n.Mesh(e,this.material);this.add(s),this.columns.push({cube:s,value:t.value}),s.position.x=this.data.values.length*this.cubeSize}changeColor(t,e){const s=this.data.values.indexOf(t),o=this.columns[s];t.color=e;const a=o.cube.geometry.getAttribute("color");for(let e=0;e<a.count;e++)a.setXYZ(e,t.color.r,t.color.g,t.color.b);a.needsUpdate=!0}changeValue(t,e){const s=this.data.values.indexOf(t),o=this.columns[s];t.value=e;const a=t.value/this.max*10;c(o.cube.geometry.attributes.position,l,a)}createCubeGeometry(t){const e=new n.BufferGeometry,s=new Float32Array(this.vertices),o=new Uint32Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]);e.setAttribute("position",new n.BufferAttribute(s,3)),e.setIndex(new n.BufferAttribute(o,1)),e.setAttribute("normal",new n.BufferAttribute(a,3));const i=[];for(let s=0;s<e.attributes.position.count;s++)i.push(t.r,t.g,t.b);return e.setAttribute("color",new n.BufferAttribute(new Float32Array(i),3)),e}start(){for(let t=0;t<this.columns.length;t++){const e=this.columns[t];this.play(e.cube,e.value,e.label,t)}}reload(t){this.update=()=>{},[].forEach(t=>{t.stop()}),this.reset(),this.data.values=t.values,this.clean(),this.init(),this.start()}play(t,e,s,o=0){const a={value:0};r.gsap.to(a,{value:e/this.max*10,duration:.5,delay:.05*o,onStart:()=>{},onUpdate:()=>{c(t.geometry.attributes.position,l,a.value)},onComplete:()=>{},onRepeat:()=>{}})}}}const m=o.default||o;!async function t(){if(m.engine.ready){if(m.engine.Factory.RegisterElement("ColumnChart",h,{label:"Column Chart"}),!window.isEditor)return;window.vue.component("chartsUI",(0,a.defineAsyncComponent)(async()=>{const t=await s.e(652).then(s.bind(s,652));return t.default||t})),m.inspector.addToModels(["ColumnChart"],[{label:"Max",content:{component:"Float",prop:"max",state:!0}},{label:"Values",content:{component:"chartsUI",prop:"values",state:!0}}])}else m.engine.onload(t)}()}}]);